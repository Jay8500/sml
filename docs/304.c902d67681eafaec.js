"use strict";(self.webpackChunksakiademo=self.webpackChunksakiademo||[]).push([[304],{4304:(se,y,i)=>{i.r(y),i.d(y,{RecoverypostsModule:()=>te});var f=i(6814),b=i(2129),A=i(5861),e=i(4769),h=i(5219),T=i(8645),p=i(9773),L=i(4850),n=i(6990),m=i(6223),g=i(3714),v=i(9552),C=i(4104);const O=["aa"],D=["ab"],I=["ac"],Z=["ad"],E=["ae"],U=["af"],N=["ag"];function w(r,c){1&r&&(e.TgZ(0,"tr")(1,"th",13)(2,"div",14),e._uU(3," SMT CODE "),e._UZ(4,"p-columnFilter",15),e.qZA()(),e.TgZ(5,"th",16)(6,"div",14),e._uU(7," Name "),e.qZA()(),e.TgZ(8,"th",13)(9,"div",14),e._uU(10," Repayment Mode "),e.qZA()(),e.TgZ(11,"th",13)(12,"div",14),e._uU(13," Due Amount "),e.qZA()(),e.TgZ(14,"th",13)(15,"div",14),e._uU(16," Collected "),e.qZA()(),e.TgZ(17,"th",13)(18,"div",14),e._uU(19," Payment Type "),e.qZA()()())}function P(r,c){if(1&r){const o=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"input",17),e.NdJ("ngModelChange",function(a){e.CHM(o);const t=e.oxw();return e.KtG(t.createMaster.collectedloanAmount=a)}),e.qZA()(),e.TgZ(11,"td")(12,"input",17),e.NdJ("ngModelChange",function(a){e.CHM(o);const t=e.oxw();return e.KtG(t.createMaster.collectedPaymentType=a)}),e.qZA()()()}if(2&r){const o=c.$implicit,s=e.oxw();e.xp6(2),e.hij(" ",o.smtcode," "),e.xp6(2),e.hij(" ",o.borrower," "),e.xp6(2),e.hij(" ",o.loanscheduleName," "),e.xp6(2),e.hij(" ",o.loanAmountName," "),e.xp6(2),e.Q6J("ngModel",s.createMaster.collectedloanAmount),e.xp6(2),e.Q6J("ngModel",s.createMaster.collectedPaymentType)}}function x(r,c){1&r&&(e.TgZ(0,"tr")(1,"td",18),e._uU(2,"Recovery Postings found."),e.qZA()())}function G(r,c){1&r&&(e.TgZ(0,"tr")(1,"td",19),e._uU(2,"Loading Recovery Postings data. Please wait."),e.qZA()())}const J=function(){return{width:"100%",right:"0",left:"0"}},F=function(r){return{"920px":r}};let H=(()=>{var r;class c{constructor(){this.pymentType=[{label:"Online",value:"Online"},{label:"Cash",value:"Cash"}],this.isShowForm=!1,this.isShowSidebarClose=!1,this.isCloseOnEscape=!1,this.destroy$=new T.x,this.MessageService=(0,e.f3M)(h.ez),this._service=(0,e.f3M)(L.r),this.blocUI=!1,this.selectedState=null,this.states=[{name:"Arizona",code:"Arizona"},{name:"California",value:"California"},{name:"Florida",code:"Florida"},{name:"Ohio",code:"Ohio"},{name:"Washington",code:"Washington"}],this.usersList=[],this.dropdownItems=[{name:"Option 1",code:"Option 1"},{name:"Option 2",code:"Option 2"},{name:"Option 3",code:"Option 3"}],this.statuses=[{label:"Active",value:"qualified"},{label:"Inactive",value:"unqualified"},{label:"New",value:"new"},{label:"Negotiation",value:"negotiation"},{label:"Renewal",value:"renewal"},{label:"Proposal",value:"proposal"}],this.borrwoersList=[{label:"Select borrowers",value:null}],this.branches=[{label:"Select Branches",value:null,bcode:"",clientCount:0}],this.caders=[{label:"Select Caders",value:null}],this.cities1=[],this.cities2=[],this.city1=null,this.city2=null,this.mode="",this.addressList=[],this.loading=!1,this.crudGrid=[],this.params={},this.houseTypeList=[{label:"Own",value:1},{label:"Rent",value:2}],this.productTypeList=[{label:"Deposit",value:1},{label:"Mortgage Loan",value:2},{label:"Housing Loan",value:3},{label:"LAP",value:4},{label:"Gold Loan",value:5},{label:"Personal Loan",value:6},{label:"Third Party",value:7},{label:"MEL",value:8},{label:"Group Lending",value:9},{label:"Individual Lending",value:10}],this.loanShedule=[{label:"Weekly",value:1},{label:"Daily",value:1},{label:"Monthly",value:3}],this.loanAmountList=[{label:"Rs.5,000",value:5e3},{label:"Rs.6,000",value:6e3},{label:"Rs.7,000",value:7e3},{label:"Rs.8,000",value:8e3},{label:"Rs.9,000",value:9e3},{label:"Rs.10,000",value:1e4},{label:"Rs.15,000",value:15e3},{label:"Rs.20,000",value:2e4},{label:"Rs.25,000",value:25e3},{label:"Rs.30,000",value:3e4},{label:"Rs.35,000",value:35e3},{label:"Rs.40,000",value:4e4},{label:"Rs.45,000",value:4e4},{label:"Rs.50,000",value:5e4},{label:"Rs.60,000",value:6e4},{label:"Rs.70,000",value:7e4},{label:"Rs.80,000",value:8e4},{label:"Rs.90,000",value:9e4},{label:"Rs.100,000",value:1e5}],this.despositList=[{label:"Daily",value:1},{label:"Weekly",value:2},{label:"Monthly",value:3},{label:"Recuring Deposit",value:4}],this.tenureList=[{label:"50",value:1},{label:"40",value:2},{label:"35",value:3},{label:"30",value:4},{label:"25",value:5},{label:"12",value:6}],this.createMaster={smtcode:"",branch:this._service.getUserInfo("branchid"),borrowername:"",housetype:"",prodtype:"",loanamount:"",loanschedule:"",tenure:"",bankname:"",accountno:"",accountname:"",ifsc:"",surityname:"",surityaadhar:"",surityhousetype:"",contactnumber:"",deposit:"",approvalstatus:"P",approvalremarks:"",approvalby:"P",active:!0,paymenttype:"",disbursementstatus:"",disbursementstatusremarks:""},this.defaultUser=JSON.stringify(this.createMaster),this.errorMessages={borrowername:"",housetype:"",prodtype:"",loanamount:"",loanschedule:"",tenure:"",bankname:"",accountno:"",accountname:"",ifsc:"",surityname:"",surityaadhar:"",surityhousetype:"",contactnumber:"",deposit:"",active:!0,paymenttype:"",disbursementstatus:"",disbursementstatusremarks:""},this.defErrs=JSON.stringify(this.errorMessages),this.approvalsStatusList=[{label:"Approved",value:"A"},{label:"Cancel",value:"C"}],this.loanStatusRemarks="Disbursement remarks",this.borrowersList=[{name:"Select borrower",value:null}],this.fileSize=()=>this._service.fileMaxSize(),this.isOk=!1,this.submitloading=!1}getErrorMessages(s){switch(s){case"paymenttype":this.errorMessages.paymenttype=[void 0,null,""].includes(this.createMaster.paymenttype)?"Payment Type is required":"";break;case"disbursementstatus":this.errorMessages.disbursementstatus=[void 0,null,""].includes(this.createMaster.disbursementstatus)?"Dibursement Status is required":""}}onloanStatusRemarks(){this.loanStatusRemarks=n.filter(this.approvalsStatusList,{value:this.createMaster.approvalstatus})[0].label}onProducttype(){1!=this.createMaster.prodtype&&(this.createMaster.deposit="")}ngOnInit(){var s=this;return(0,A.Z)(function*(){let a=s._service.getUserInfo("userCader");"DA"==a.code&&(s.params.code="DEV"),"SA"==a.code&&(s.params.code="SA"),"HRPM"==a.code&&(s.params.code="HRPM"),s.params.create_by=s._service.getUserInfo("_id"),s._service.postApi("getBranch","postEndPoint",{filter:"Drop",create_by:s._service.getUserInfo("_id")}).pipe((0,p.R)(s.destroy$)).subscribe({next:t=>{200==(t=s._service.enableCryptoForResponse()?s._service.decrypt(t):t).S_CODE&&(s.branches=[{label:"Select Branches",value:null,bcode:"",clientCount:0}],t.DATA.forEach((l,u)=>{s.branches.push({label:l.bname,value:l.id,bcode:l.bcode,clientCount:l.clientCount})}),s.generateCode(s.createMaster))},error:t=>{}}),s._service.postApi("getOnlyCreatedBorrowers","postEndPoint",{create_by:s._service.getUserInfo("_id")}).pipe((0,p.R)(s.destroy$)).subscribe({next:t=>{200==(t=s._service.enableCryptoForResponse()?s._service.decrypt(t):t).S_CODE&&(s.borrwoersList=[{label:"Select Branches",value:null}],t.DATA.length>0&&(s.borrwoersList=t.DATA))},error:t=>{}}),s.addressList=[],s._service.postApi("getAddressList","postEndPoint",{}).pipe((0,p.R)(s.destroy$)).subscribe({next:t=>{200==(t=s._service.enableCryptoForResponse()?s._service.decrypt(t):t).S_CODE&&(s.addressList=t.DATA[0].data)},error:t=>{}}),s.gridData()})()}gridData(){try{this._service.postApi("smlgetusers","postEndPoint",{code:"HRPM",ctrl:"nofilter"}).pipe((0,p.R)(this.destroy$)).subscribe({next:a=>{200==(a=this._service.enableCryptoForResponse()?this._service.decrypt(a):a).S_CODE&&(this.usersList=n.filter(a.DATA,(t,l)=>1==t.active))},error:a=>{}}),this.loading=!0;let s=this._service.getUserInfo("userCader");"DA"==s.code&&(this.params.code="DEV"),"SA"==s.code&&(this.params.code="SA"),"HRPM"==s.code&&(this.params.code="HRPM"),this.params.create_by=this._service.getUserInfo("_id"),this.crudGrid=[],this._service.postApi("gnloanslist","postEndPoint",this.params).pipe((0,p.R)(this.destroy$)).subscribe({next:a=>{200==(a=this._service.enableCryptoForResponse()?this._service.decrypt(a):a).S_CODE?(this.blocUI=!1,a.DATA=n.filter(a.DATA,{approvalstatus:"A"}),a.DATA.length>0&&a.DATA.forEach((t,l)=>{let u={accountname:t.accountname,accountno:t.accountno,disbursementstatus:t.disbursementstatus,disbursementstatusremarks:t.disbursementstatusremarks,paymenttype:t.paymenttype,approvalby:n.filter(this.usersList||[],{id:t.approvalby}).length>0?n.filter(this.usersList||[],{id:t.approvalby})[0].uname:"",approvalremarks:t.approvalremarks,approvalstatus:t.approvalstatus,bankname:t.bankname,borrower:t.borrower,borrowername:t.borrowername,branch:t.branch,branchName:t.branchname,contactnumber:t.contactnumber,create_by:t.create_by,create_dt:t.create_dt,deposit:t.deposit,depositName:[void 0,null,"","0"].includes(t.deposit)?"Not Selected":n.filter(this.despositList,{value:parseInt(t.deposit)})[0].label,description:t.description,housetype:t.housetype,housetypeName:[void 0,null,""].includes(t.housetype)?"":n.filter(this.houseTypeList,{value:parseInt(t.housetype)})[0].label,ifsc:t.ifsc,loanamount:t.loanamount,loanAmountName:n.filter(this.loanAmountList||[],{value:parseInt(t.loanamount)})[0].label,loanschedule:t.loanschedule,loanscheduleName:[void 0,null,""].includes(t.loanschedule)?"":n.filter(this.tenureList,{value:parseInt(t.loanschedule)})[0].label,modify_by:t.modify_by,collectedloanAmount:"",collectedPaymentType:"",modify_dt:t.modify_dt,prodtype:t.prodtype,prodtypeName:[void 0,null,""].includes(t.prodtype)?"":n.filter(this.productTypeList,{value:parseInt(t.prodtype)})[0].label,smtcode:t.smtcode,surityaadhar:t.surityaadhar,surityhousetype:t.surityhousetype,surityhousetypeName:[void 0,null,""].includes(t.prodtype)?"":n.filter(this.houseTypeList,{value:parseInt(t.surityhousetype)})[0].label,surityname:t.surityname,tenure:t.tenure,tenureName:[void 0,null,""].includes(t.prodtype)?"":n.filter(this.tenureList,{value:parseInt(t.tenure)})[0].label,_id:t._id,id:l+1,active:t.active,status:1==t.active?"Active":"Inactive"};this.crudGrid.push(u)}),this.loading=!1):300==a.S_CODE&&(this.blocUI=!1,this.loading=!1)},error:a=>{this.blocUI=!1}})}catch{this.blocUI=!1}}onSelect(s,a){try{if(![void 0,null,""].includes(s)&&Object.keys(s.files).length>0){const t=s.files[0];t&&this.uploadFile(t,a)}}catch{}}uploadFile(s,a){let t=new FileReader;t.onload=l=>{this.createMaster[a]=l.target.result},t.readAsDataURL(s),this.aa.clear(),this.ab.clear(),this.ac.clear(),this.ad.clear(),this.ae.clear(),this.af.clear(),this.ag.clear()}onClick(s,a){this.isShowForm=!0,this.submitloading=!1,this.isShowSidebarClose=!0,this.mode=a,this.errorMessages=JSON.parse(this.defErrs),this.createMaster=JSON.parse(this.defaultUser),["NEW"].includes(a)&&this.generateCode(this.createMaster),["VIEW","EDIT"].includes(a)&&(this.createMaster={smtcode:s.smtcode,borrowername:s.borrowername,housetype:parseInt(s.housetype),prodtype:parseInt(s.prodtype),loanamount:parseInt(s.loanamount),loanschedule:parseInt(s.loanschedule),tenure:parseInt(s.tenure),branch:s.branch,bankname:s.bankname,accountno:s.accountno,accountname:s.accountname,ifsc:s.ifsc,surityname:s.surityname,surityaadhar:s.surityaadhar,surityhousetype:parseInt(s.surityhousetype),contactnumber:s.contactnumber,deposit:parseInt(s.deposit||"0"),approvalstatus:s.approvalstatus,approvalremarks:s.approvalremarks,approvalby:s.approvalby,description:s.description,id:s._id,active:!!s.active})}saveProduct(){try{n.forEach(["paymenttype","disbursementstatus"],(l,u)=>{this.getErrorMessages(l)});let a=0;if(Object.values(this.errorMessages).every((l,u)=>{""==l&&a++}),a>0){this.submitloading=!0;let l=JSON.parse(JSON.stringify(this.createMaster));l.flag="DISBURSEMENT",l.create_by=this._service.getUserInfo("_id");let u=n.filter(this.borrwoersList,{_id:this.createMaster.borrowername});l.borrower=u[0].name,this._service.postApi("generateloans","postEndPoint",l).pipe((0,p.R)(this.destroy$)).subscribe({next:d=>{200==(d=this._service.enableCryptoForResponse()?this._service.decrypt(d):d).S_CODE?(this.isShowSidebarClose=!1,this.MessageService.add({severity:"success",summary:"Success",detail:`${d.S_MSG}`}),this.isOk=!0,this.createMaster=JSON.parse(this.defaultUser),this.submitloading=!1):[400,300].includes(d.S_CODE)&&(this.MessageService.add({severity:"error",summary:"Error",detail:`${d.S_MSG}`}),this.submitloading=!1,this.isShowSidebarClose=!1,this.submitloading=!1)},error:d=>{this.submitloading=!1}})}}catch{}}hideDialog(){this.isShowForm=!1,this.createMaster=JSON.parse(this.defaultUser),this.errorMessages=JSON.parse(this.defErrs)}onMessageClose(){try{this.isOk&&(this.isShowSidebarClose=!0,this.gridData(),this.hideDialog())}catch{}}generateCode(s){try{if(![void 0,null,""].includes(s.branch)){let a=n.filter(this.branches,{value:s.branch});a.length>0&&(s.smtcode=a[0].bcode+(a[0].clientCount+1).toString().padStart(this._service.getCodeLength(),"0"))}}catch{}}}return(r=c).\u0275fac=function(s){return new(s||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-recoveryposts"]],viewQuery:function(s,a){if(1&s&&(e.Gf(O,5),e.Gf(D,5),e.Gf(I,5),e.Gf(Z,5),e.Gf(E,5),e.Gf(U,5),e.Gf(N,5)),2&s){let t;e.iGM(t=e.CRH())&&(a.aa=t.first),e.iGM(t=e.CRH())&&(a.ab=t.first),e.iGM(t=e.CRH())&&(a.ac=t.first),e.iGM(t=e.CRH())&&(a.ad=t.first),e.iGM(t=e.CRH())&&(a.ae=t.first),e.iGM(t=e.CRH())&&(a.af=t.first),e.iGM(t=e.CRH())&&(a.ag=t.first)}},features:[e._Bn([h.ez,h.YP])],decls:14,vars:10,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex","align-items-center","justify-content-center","w-10rem","h-2rem","font-bold","border-round","m-2"],[1,"flex","align-items-center","justify-content-center","w-0rem","h-0","font-bold","border-round","m-1"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","showCurrentPageReport","paginator"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["position","top-right",3,"breakpoints","onClose"],[2,"min-width","12rem"],[1,"flex","justify-content-between","align-items-center"],["type","text","field","smtcode","display","menu","placeholder","Search by SML CODE"],[2,"min-width","22rem"],["pInputText","","id","age1","type","text",3,"ngModel","ngModelChange"],["colspan","6"],["colspan","6 "]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Recovery Postings "),e.qZA(),e._UZ(6,"div",5),e.qZA(),e.TgZ(7,"p-table",6,7),e.YNc(9,w,20,0,"ng-template",8),e.YNc(10,P,13,6,"ng-template",9),e.YNc(11,x,3,0,"ng-template",10),e.YNc(12,G,3,0,"ng-template",11),e.qZA()()()(),e.TgZ(13,"p-toast",12),e.NdJ("onClose",function(){return a.onMessageClose()}),e.qZA()),2&s&&(e.xp6(7),e.Q6J("value",a.crudGrid)("rows",10)("loading",a.loading)("rowHover",!0)("showCurrentPageReport",!0)("paginator",!0),e.xp6(6),e.Q6J("breakpoints",e.VKq(8,F,e.DdM(7,J))))},dependencies:[m.Fj,m.JJ,m.On,h.jx,g.o,v.iA,v.xl,C.FN],styles:["[_nghost-%COMP%]     .p-cascadeselect-items {\n        max-height: 100px;\n        overflow: auto;\n    }"]}),c})(),j=(()=>{var r;class c{}return(r=c).\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[b.Bz.forChild([{path:"",component:H}]),b.Bz]}),c})();var _=i(7327),$=i(6760),k=i(1480),z=i(3965),B=i(9663),R=i(5167),M=i(8062),W=i(4055),Q=i(6218),V=i(7902),K=i(6651),Y=i(9246),X=i(6782),q=i(2892),ee=i(3722);let te=(()=>{var r;class c{}return(r=c).\u0275fac=function(s){return new(s||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[f.ez,j,f.ez,m.u5,_.WN,$._8,k.Gg,z.kW,B.zz,R.L$,M.XH,W.q4,Q.A,g.j,v.U$,V.JH,K.q,Y.l,X.kK,M.XH,ee.O,q.$,R.L$,C.EV]}),c})()}}]);