"use strict";(self.webpackChunksakiademo=self.webpackChunksakiademo||[]).push([[392],{5392:(ge,C,o)=>{o.r(C),o.d(C,{CompanyModule:()=>ue});var y=o(6814),v=o(2129),e=o(4769),p=o(5219),O=o(8645),u=o(9773),N=o(4850),g=o(6990),m=o(6223),_=o(707),b=o(3714),h=o(8062),Z=o(6218),f=o(9552),M=o(9246),A=o(3722),T=o(2892),S=o(4104),U=o(8039);const q=["aa"],w=["ab"],F=["ac"],L=["ad"],D=["ae"],R=["af"],G=["ag"];function Q(s,l){1&s&&(e.TgZ(0,"tr")(1,"th",36)(2,"div",37),e._uU(3," Action "),e.qZA()(),e.TgZ(4,"th",38)(5,"div",37),e._uU(6," Name "),e._UZ(7,"p-columnFilter",39),e.qZA()(),e.TgZ(8,"th",40)(9,"div",37),e._uU(10," Image "),e.qZA()(),e.TgZ(11,"th",40)(12,"div",37),e._uU(13," Country "),e._UZ(14,"p-columnFilter",41),e.qZA()(),e.TgZ(15,"th",38)(16,"div",37),e._uU(17," State "),e._UZ(18,"p-columnFilter",42),e.qZA()(),e.TgZ(19,"th",38)(20,"div",37),e._uU(21," City "),e._UZ(22,"p-columnFilter",43),e.qZA()(),e.TgZ(23,"th",38)(24,"div",37),e._uU(25," Address "),e.qZA()(),e.TgZ(26,"th",38)(27,"div",37),e._uU(28," Description "),e.qZA()(),e.TgZ(29,"th",38)(30,"div",37),e._uU(31," Status "),e._UZ(32,"p-columnFilter",44),e.qZA()()())}function W(s,l){1&s&&(e.TgZ(0,"span"),e._uU(1,"Active"),e.qZA()),2&s&&e.Tol("customer-badge status-qualified")}function H(s,l){1&s&&(e.TgZ(0,"span"),e._uU(1,"Inactive"),e.qZA()),2&s&&e.Tol("customer-badge status-unqualified")}function j(s,l){if(1&s){const r=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",45)(3,"div",46),e.NdJ("click",function(){const i=e.CHM(r).$implicit,n=e.oxw();return e.KtG(n.onClick(i,"VIEW"))}),e._UZ(4,"i",47),e.qZA(),e.TgZ(5,"div",46),e.NdJ("click",function(){const i=e.CHM(r).$implicit,n=e.oxw();return e.KtG(n.onClick(i,"EDIT"))}),e._UZ(6,"i",48),e.qZA()()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"p-avatar",49),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e._uU(16),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA(),e.TgZ(21,"td"),e.YNc(22,W,2,2,"span",50),e.YNc(23,H,2,2,"span",50),e.qZA()()}if(2&s){const r=l.$implicit;e.xp6(8),e.hij(" ",r.cname," "),e.xp6(2),e.Q6J("image",r.cLogo),e.xp6(2),e.hij(" ",r.countryname," "),e.xp6(2),e.hij(" ",r.state," "),e.xp6(2),e.hij(" ",r.cityname," "),e.xp6(2),e.hij(" ",r.cadress," "),e.xp6(2),e.hij(" ",r.decs," "),e.xp6(2),e.Q6J("ngIf",1==r.active),e.xp6(1),e.Q6J("ngIf",0==r.active)}}function k(s,l){1&s&&(e.TgZ(0,"tr")(1,"td",51),e._uU(2,"No Company found."),e.qZA()())}function z(s,l){1&s&&(e.TgZ(0,"tr")(1,"td",51),e._uU(2,"Loading Company data. Please wait."),e.qZA()())}function V(s,l){if(1&s&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&s){const r=e.oxw();e.xp6(1),e.Oqu(r.errorMessages.cname)}}function P(s,l){if(1&s&&e._UZ(0,"p-image",52),2&s){const r=e.oxw();e.Q6J("src",r.createMaster.cLogo)("preview",!0)}}function Y(s,l){if(1&s){const r=e.EpF();e.TgZ(0,"p-button",53),e.NdJ("click",function(){e.CHM(r);const t=e.oxw();return e.KtG(t.createMaster.cLogo=null)}),e.qZA()}}function $(s,l){if(1&s&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&s){const r=e.oxw();e.xp6(1),e.Oqu(r.errorMessages.city)}}function B(s,l){if(1&s&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&s){const r=e.oxw();e.xp6(1),e.Oqu(r.errorMessages.cadress)}}const K=function(){return{minWidth:"14rem"}},X=function(){return["states","cities"]},ee=function(){return{width:"100%",right:"0",left:"0"}},te=function(s){return{"920px":s}};let ie=(()=>{var s;class l{constructor(){this.isShowForm=!1,this.isShowSidebarClose=!1,this.isCloseOnEscape=!1,this.destroy$=new O.x,this.MessageService=(0,e.f3M)(p.ez),this._service=(0,e.f3M)(N.r),this.blocUI=!1,this.selectedState=null,this.states=[{name:"Arizona",code:"Arizona"},{name:"California",value:"California"},{name:"Florida",code:"Florida"},{name:"Ohio",code:"Ohio"},{name:"Washington",code:"Washington"}],this.dropdownItems=[{name:"Option 1",code:"Option 1"},{name:"Option 2",code:"Option 2"},{name:"Option 3",code:"Option 3"}],this.statuses=[{label:"Active",value:"qualified"},{label:"Inactive",value:"unqualified"},{label:"New",value:"new"},{label:"Negotiation",value:"negotiation"},{label:"Renewal",value:"renewal"},{label:"Proposal",value:"proposal"}],this.branches=[{label:"Select Branches",value:null,bcode:"",clientCount:0}],this.caders=[{label:"Select Caders",value:null}],this.cities1=[],this.cities2=[],this.city1=null,this.city2=null,this.mode="",this.addressList=[],this.loading=!1,this.crudGrid=[],this.params={},this.createMaster={id:null,cname:"",cLogo:null,ccode:"",cadress:"",city:"",decs:"",active:!0},this.defaultUser=JSON.stringify(this.createMaster),this.errorMessages={cname:"",cadress:"",city:""},this.defErrs=JSON.stringify(this.errorMessages),this.fileSize=()=>this._service.fileMaxSize(),this.isOk=!1,this.submitloading=!1}getErrorMessages(a){switch(a){case"name":this.errorMessages.cname=[void 0,null,""].includes(this.createMaster.cname)?"Name is required":"";break;case"city":this.errorMessages.city=[void 0,null,""].includes(this.createMaster.city)||"object"!=typeof this.createMaster.city?"City is required":"";break;case"cadress":this.errorMessages.cadress=[void 0,null,""].includes(this.createMaster.cadress)?"Address is required":""}}ngOnInit(){this.countries=[{name:"Australia",code:"AU",states:[{name:"New South Wales",cities:[{cname:"Sydney",code:"A-SY"},{cname:"Newcastle",code:"A-NE"},{cname:"Wollongong",code:"A-WO"}]},{name:"Queensland",cities:[{cname:"Brisbane",code:"A-BR"},{cname:"Townsville",code:"A-TO"}]}]},{name:"Canada",code:"CA",states:[{name:"Quebec",cities:[{cname:"Montreal",code:"C-MO"},{cname:"Quebec City",code:"C-QU"}]},{name:"Ontario",cities:[{cname:"Ottawa",code:"C-OT"},{cname:"Toronto",code:"C-TO"}]}]},{name:"United States",code:"US",states:[{name:"California",cities:[{cname:"Los Angeles",code:"US-LA"},{cname:"San Diego",code:"US-SD"},{cname:"San Francisco",code:"US-SF"}]},{name:"Florida",cities:[{cname:"Jacksonville",code:"US-JA"},{cname:"Miami",code:"US-MI"},{cname:"Tampa",code:"US-TA"},{cname:"Orlando",code:"US-OR"}]},{name:"Texas",cities:[{cname:"Austin",code:"US-AU"},{cname:"Dallas",code:"US-DA"},{cname:"Houston",code:"US-HO"}]}]}];let a=this._service.getUserInfo("userCader");"DA"==a.code&&(this.params.code="DEV"),"SA"==a.code&&(this.params.code="SA"),"HRPM"==a.code&&(this.params.code="HRPM"),this.params.create_by=this._service.getUserInfo("_id"),this._service.postApi("getCompany","postEndPoint",{}).pipe((0,u.R)(this.destroy$)).subscribe({next:t=>{200==(t=this._service.enableCryptoForResponse()?this._service.decrypt(t):t).S_CODE&&t.DATA.forEach((i,n)=>{this.branches.push({label:i.bname,value:i.id,bcode:i.bcode,clientCount:i.clientCount})})},error:t=>{}}),this.addressList=[],this._service.postApi("getAddressList","postEndPoint",{}).pipe((0,u.R)(this.destroy$)).subscribe({next:t=>{200==(t=this._service.enableCryptoForResponse()?this._service.decrypt(t):t).S_CODE&&(this.addressList=t.DATA[0].data)},error:t=>{}}),this.gridData()}gridData(){try{this.loading=!0;let a=this._service.getUserInfo("userCader");"DA"==a.code&&(this.params.code="DEV"),"SA"==a.code&&(this.params.code="SA"),"HRPM"==a.code&&(this.params.code="HRPM"),this.params.create_by=this._service.getUserInfo("_id"),this.crudGrid=[],this._service.postApi("getCompany","postEndPoint",{}).pipe((0,u.R)(this.destroy$)).subscribe({next:t=>{200==(t=this._service.enableCryptoForResponse()?this._service.decrypt(t):t).S_CODE?(this.blocUI=!1,t.DATA.forEach((i,n)=>{this.crudGrid.push({active:i.active,cLogo:i.cLogo,cadress:i.cadress,ccode:i.ccode,city:i.city,cityname:i.cityname,cname:i.cname,countryname:i.countryname,create_dt:i.create_dt,decs:i.decs,state:i.state,id:i._id,dataKey:n+1,status:1==i.active?"Qualified":"Unqualified"})}),this.loading=!1):300==t.S_CODE&&(this.blocUI=!1,this.loading=!1)},error:t=>{this.blocUI=!1}})}catch{this.blocUI=!1}}onSelect(a,t){try{if(![void 0,null,""].includes(a)&&Object.keys(a.files).length>0){const i=a.files[0];i&&this.uploadFile(i,t)}}catch{}}uploadFile(a,t){let i=new FileReader;i.onload=n=>{this.createMaster[t]=n.target.result},i.readAsDataURL(a),this.aa.clear(),this.ab.clear(),this.ac.clear(),this.ad.clear(),this.ae.clear(),this.af.clear(),this.ag.clear()}onClick(a,t){this.isShowForm=!0,this.isShowSidebarClose=!0,this.errorMessages=JSON.parse(this.defErrs),this.createMaster=JSON.parse(this.defaultUser),this.mode=t,["VIEW","EDIT"].includes(t)&&(this.createMaster={cname:a.cname,ccode:a.ccode,cLogo:a.cLogo,cadress:a.cadress,city:{code:a.city,cname:a.cityname},decs:a.decs,id:a.id,active:!!a.active})}saveProduct(){try{g.forEach(["cname","city","cadress"],(n,c)=>{this.getErrorMessages(n)});let t=0;if(Object.values(this.errorMessages).every((n,c)=>{""==n&&t++}),t>0){this.submitloading=!0;let n=JSON.parse(JSON.stringify(this.createMaster));n.flag="NEW"==this.mode||""==this.mode?"S":"E";let c=[];g.forEach(this.addressList,d=>{g.forEach(d.states,J=>{const E=g.filter(J.cities,I=>I.code===this.createMaster.city.code&&I.name===this.createMaster.city.name);E.length>0&&c.push({country:d.name,state:J.name,cities:E})})}),n.countryname=c[0].country,n.state=c[0].state,n.cityname=c[0].cities[0].cname,n.cityname=c[0].cities[0].cname,n.city=this.createMaster.city.code,n.create_by=this._service.getUserInfo("_id"),this._service.postApi("createCompany","postEndPoint",n).pipe((0,u.R)(this.destroy$)).subscribe({next:d=>{200==(d=this._service.enableCryptoForResponse()?this._service.decrypt(d):d).S_CODE?(this.isShowSidebarClose=!1,this.isOk=!0,this.MessageService.add({severity:"success",summary:"Success",detail:`${d.S_MSG}`}),this.submitloading=!1,this.createMaster=JSON.parse(this.defaultUser)):300==d.S_CODE&&(this.MessageService.add({severity:"error",summary:"Error",detail:`${d.S_MSG}`}),this.submitloading=!1,this.isShowSidebarClose=!1)},error:d=>{this.submitloading=!1}})}}catch{}}hideDialog(){this.isShowForm=!1,this.createMaster=JSON.parse(this.defaultUser),this.errorMessages=JSON.parse(this.defErrs)}onMessageClose(){this.isOk&&(this.isShowSidebarClose=!0,this.gridData(),this.hideDialog())}}return(s=l).\u0275fac=function(a){return new(a||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-company"]],viewQuery:function(a,t){if(1&a&&(e.Gf(q,5),e.Gf(w,5),e.Gf(F,5),e.Gf(L,5),e.Gf(D,5),e.Gf(R,5),e.Gf(G,5)),2&a){let i;e.iGM(i=e.CRH())&&(t.aa=i.first),e.iGM(i=e.CRH())&&(t.ab=i.first),e.iGM(i=e.CRH())&&(t.ac=i.first),e.iGM(i=e.CRH())&&(t.ad=i.first),e.iGM(i=e.CRH())&&(t.ae=i.first),e.iGM(i=e.CRH())&&(t.af=i.first),e.iGM(i=e.CRH())&&(t.ag=i.first)}},features:[e._Bn([p.ez,p.YP])],decls:63,vars:45,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex","align-items-center","justify-content-center","w-10rem","h-2rem","font-bold","border-round","m-2"],[1,"flex","align-items-center","justify-content-center","w-0rem","h-0","font-bold","border-round","m-1"],["pButton","","pRipple","","label","Add new",1,"p-button-success",3,"loading","click"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[3,"visible","fullScreen","showCloseIcon","closeOnEscape","visibleChange"],[1,"col-12","col-offset-0","md:col-6","md:col-offset-3","lg:col-4","lg:col-offset-4","xl:col-4","xl:col-offset-4"],[1,"card","p-fluid"],["htmlFor","name1"],["id","firstname2","type","text","pInputText","",1,"p-2","ng-invalid","ng-dirty",3,"autocomplete","ngModel","disabled","blur","ngModelChange"],[4,"ngIf"],["for","firstname2"],[1,"formgrid","grid"],[1,"field","col"],["mode","basic","chooseLabel","Choose","name","demo[]","accept","image/*",3,"disabled","previewWidth","maxFileSize","fileLimit","onSelect"],["aa",""],["alt","Image","width","50","height","50",3,"src","preview",4,"ngIf"],["icon","pi pi-trash","severity","danger",3,"click",4,"ngIf"],[1,"col-6"],["htmlFor","state"],["placeholder","Select a City","placeholder","Select a City",1,"ng-invalid","ng-dirty",3,"ngModel","options","optionLabel","disabled","optionGroupLabel","optionGroupChildren","ngModelChange"],["rows","5","cols","30","pInputTextarea","",1,"p-2","ng-invalid","ng-dirty",3,"disabled","ngModel","ngModelChange"],["rows","5","cols","30","pInputTextarea","",3,"disabled","ngModel","ngModelChange"],["type","checkbox","name","master","id","1",3,"ngModel","disabled","ngModelChange"],["for","lastname2",1,"ml-2"],["pButton","","pRipple","","label","Clear",1,"p-button-outlined",3,"disabled","click"],["pButton","","pRipple","","label","Submit",1,"p-button-success",3,"disabled","loading","click"],["position","top-right",3,"breakpoints","onClose"],[2,"min-width","5rem"],[1,"flex","justify-content-between","align-items-center"],[2,"min-width","12rem"],["type","text","field","cname","display","menu","placeholder","Search by name"],[2,"min-width","6rem"],["type","text","field","countryname","display","menu","placeholder","Search by country"],["type","text","field","state","display","menu","placeholder","Search by state"],["type","text","field","cityname","display","menu","placeholder","Search by city"],["type","text","field","active","display","menu","placeholder","Search by Status"],[1,"flex","justify-content-center","flex-wrap"],[1,"flex","align-items-center","ml-1",3,"click"],[1,"pi","pi-eye"],[1,"pi","pi-file-edit"],["styleClass","","size","large","shape","circle",3,"image"],[3,"class",4,"ngIf"],["colspan","9"],["alt","Image","width","50","height","50",3,"src","preview"],["icon","pi pi-trash","severity","danger",3,"click"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Company List "),e.qZA(),e._UZ(6,"div",5),e.TgZ(7,"div",4)(8,"button",6),e.NdJ("click",function(){return t.onClick(null,"NEW")}),e.qZA()()(),e.TgZ(9,"p-table",7,8),e.YNc(11,Q,33,0,"ng-template",9),e.YNc(12,j,24,9,"ng-template",10),e.YNc(13,k,3,0,"ng-template",11),e.YNc(14,z,3,0,"ng-template",12),e.qZA()()()(),e.TgZ(15,"p-sidebar",13),e.NdJ("visibleChange",function(n){return t.isShowForm=n}),e.TgZ(16,"div",0)(17,"div",14)(18,"div",15)(19,"div",0)(20,"h5"),e._uU(21,"Create Company "),e.qZA(),e.TgZ(22,"div",1)(23,"label",16),e._uU(24,"Name"),e.qZA(),e.TgZ(25,"input",17),e.NdJ("blur",function(){return t.getErrorMessages("cname")})("ngModelChange",function(n){return t.createMaster.cname=n}),e.qZA(),e.YNc(26,V,2,1,"small",18),e.qZA(),e.TgZ(27,"div",1)(28,"label",19),e._uU(29,"Logo"),e.qZA(),e.TgZ(30,"div",20)(31,"div",21)(32,"p-fileUpload",22,23),e.NdJ("onSelect",function(n){return t.onSelect(n,"cLogo")}),e.qZA()(),e.TgZ(34,"div",21),e.YNc(35,P,1,2,"p-image",24),e.qZA(),e.TgZ(36,"div",21),e.YNc(37,Y,1,0,"p-button",25),e.qZA()()(),e.TgZ(38,"div",26)(39,"label",27),e._uU(40,"Country / State/ City"),e.qZA(),e.TgZ(41,"p-cascadeSelect",28),e.NdJ("ngModelChange",function(n){return t.createMaster.city=n}),e.qZA(),e.YNc(42,$,2,1,"small",18),e.qZA(),e.TgZ(43,"div",1)(44,"label",19),e._uU(45,"Location"),e.qZA(),e.TgZ(46,"textarea",29),e.NdJ("ngModelChange",function(n){return t.createMaster.cadress=n}),e.qZA(),e.YNc(47,B,2,1,"small",18),e.qZA(),e.TgZ(48,"div",1)(49,"label",27),e._uU(50,"Description "),e.qZA(),e.TgZ(51,"textarea",30),e.NdJ("ngModelChange",function(n){return t.createMaster.decs=n}),e.qZA()(),e.TgZ(52,"div",1)(53,"input",31),e.NdJ("ngModelChange",function(n){return t.createMaster.active=n}),e.qZA(),e.TgZ(54,"label",32),e._uU(55,"Active"),e.qZA()(),e.TgZ(56,"div",1)(57,"div",0)(58,"div",26)(59,"button",33),e.NdJ("click",function(){return t.hideDialog()}),e.qZA()(),e.TgZ(60,"div",26)(61,"button",34),e.NdJ("click",function(){return t.saveProduct()}),e.qZA()()()()()()()()(),e.TgZ(62,"p-toast",35),e.NdJ("onClose",function(){return t.onMessageClose()}),e.qZA()),2&a&&(e.xp6(8),e.Q6J("loading",!1),e.xp6(1),e.Q6J("value",t.crudGrid)("rows",10)("loading",t.loading)("rowHover",!0)("paginator",!0),e.xp6(6),e.Q6J("visible",t.isShowForm)("fullScreen",!0)("showCloseIcon",t.isShowSidebarClose)("closeOnEscape",t.isCloseOnEscape),e.xp6(10),e.Q6J("autocomplete","off")("ngModel",t.createMaster.cname)("disabled","VIEW"==t.mode),e.xp6(1),e.Q6J("ngIf",""!=t.errorMessages.cname),e.xp6(6),e.Q6J("disabled","VIEW"==t.mode)("previewWidth",30)("maxFileSize",t.fileSize())("fileLimit",1),e.xp6(3),e.Q6J("ngIf",null!=t.createMaster.cLogo),e.xp6(2),e.Q6J("ngIf",null!=t.createMaster.cLogo&&"VIEW"!=t.mode),e.xp6(4),e.Akn(e.DdM(40,K)),e.Q6J("ngModel",t.createMaster.city)("options",t.addressList)("optionLabel","cname")("disabled","VIEW"==t.mode)("optionGroupLabel","name")("optionGroupChildren",e.DdM(41,X)),e.xp6(1),e.Q6J("ngIf",""!=t.errorMessages.city),e.xp6(4),e.Q6J("disabled","VIEW"==t.mode)("ngModel",t.createMaster.cadress),e.xp6(1),e.Q6J("ngIf",""!=t.errorMessages.cadress),e.xp6(4),e.Q6J("disabled","VIEW"==t.mode)("ngModel",t.createMaster.decs),e.xp6(2),e.Q6J("ngModel",t.createMaster.active)("disabled","VIEW"==t.mode||"NEW"==t.mode),e.xp6(6),e.Q6J("disabled","VIEW"==t.mode),e.xp6(2),e.Q6J("disabled","VIEW"==t.mode)("loading",t.submitloading),e.xp6(1),e.Q6J("breakpoints",e.VKq(43,te,e.DdM(42,ee))))},dependencies:[y.O5,m.Fj,m.Wl,m.JJ,m.On,p.jx,_.Hq,_.zx,b.o,h.ZK,Z.g,f.iA,f.xl,M.Y,A.p,T.E,S.FN,U.q],styles:["[_nghost-%COMP%]     .p-cascadeselect-items {\n        max-height: 100px;\n        overflow: auto;\n    }"]}),l})(),se=(()=>{var s;class l{}return(s=l).\u0275fac=function(a){return new(a||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[v.Bz.forChild([{path:"",component:ie}]),v.Bz]}),l})();var ae=o(7327),ne=o(6760),oe=o(1480),re=o(3965),le=o(9663),x=o(5167),ce=o(4055),de=o(7902),me=o(6651),pe=o(6782);let ue=(()=>{var s;class l{}return(s=l).\u0275fac=function(a){return new(a||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[y.ez,m.u5,se,ae.WN,ne._8,oe.Gg,re.kW,le.zz,x.L$,h.XH,ce.q4,Z.A,b.j,f.U$,de.JH,me.q,M.l,pe.kK,h.XH,A.O,T.$,x.L$,S.EV,U.F]}),l})()}}]);