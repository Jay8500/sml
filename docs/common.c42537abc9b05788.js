"use strict";(self.webpackChunksml=self.webpackChunksml||[]).push([[592],{7992:(w,p,r)=>{r.d(p,{w:()=>S});var t=r(4769),l=r(5219),_=r(8645),m=r(9773),h=r(4850),d=r(6814),f=r(707),a=r(3702),g=r(4104),v=r(5195);function P(i,c){if(1&i&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.headerName," ")}}function C(i,c){if(1&i&&t._UZ(0,"p-sortIcon",12),2&i){const e=t.oxw().$implicit;t.Q6J("field",e.field)}}function y(i,c){if(1&i&&(t.TgZ(0,"th",10),t._uU(1),t.YNc(2,C,1,1,"p-sortIcon",11),t.qZA()),2&i){const e=c.$implicit;t.Q6J("pSortableColumn",e.field),t.xp6(1),t.hij(" ",e.header," "),t.xp6(1),t.Q6J("ngIf",e.showSort)}}function E(i,c){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,y,3,3,"th",9),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.cols)}}function I(i,c){if(1&i&&(t.TgZ(0,"td",14),t._uU(1),t.qZA()),2&i){const e=c.$implicit,s=c.index,o=t.oxw(),n=o.columns,u=o.$implicit;t.Q6J("ngStyle","active"==n[s].field?"Active"==u[e.field]?n[s].color[1]:n[s].color[0]:n[s].style),t.xp6(1),t.hij(" ",u[e.field]," ")}}function O(i,c){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,I,2,2,"td",13),t.qZA()),2&i){const e=c.columns;t.xp6(1),t.Q6J("ngForOf",e)}}const T=function(){return[10,25,50]},x=function(){return{"min-width":"55rem","min-height":"22rem"}};function D(i,c){if(1&i&&(t.TgZ(0,"div",null,3)(2,"p-table",4),t.YNc(3,P,2,1,"ng-template",5),t.YNc(4,E,2,1,"ng-template",6),t.YNc(5,O,2,1,"ng-template",7),t.qZA()()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("value",e.products)("columns",e.cols)("paginator",!0)("rows",e.products.length)("showCurrentPageReport",!1)("rowsPerPageOptions",t.DdM(7,T))("tableStyle",t.DdM(8,x))}}let S=(()=>{class i{constructor(e,s){this.messageService=e,this.confirmationService=s,this.masterApiKey="",this.headerName="Mange Headers",this.productDialog=!1,this.clonedProducts={},this.products=[],this.submitted=!1,this.blocUI=!1,this._service=(0,t.f3M)(h.r),this.destroy$=new _.x,this.isEnabled=new t.vpe}ngOnInit(){this.blocUI=!0,this.gridData(),setInterval(()=>this.blocUI=!1,4e3),this.statuses=[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]}gridData(){try{this._service.postApi(this.masterApiKey,"postEndPoint",null).pipe((0,m.R)(this.destroy$)).subscribe({next:e=>{200==e.S_CODE&&(this.products=[],e.DATA.forEach((s,o)=>{s.active=1==s.active?"Active":"Inactive";let n={...this.onlyGenderProps,...s};this.products.push(n)}))},error:e=>{this.blocUI=!1}})}catch{}}openNew(){this.product={},this.submitted=!1,this.isEnabled.emit(!0),this.productDialog=!0}deleteSelectedProducts(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected products?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(e=>!this.selectedProducts?.includes(e)),this.selectedProducts=null,this.messageService.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})}})}editProduct(e){this.product={...e},this.productDialog=!0}deleteProduct(e){this.confirmationService.confirm({message:"Are you sure you want to delete "+e.name+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(s=>s.id!==e.id),this.product={},this.messageService.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})}})}hideDialog(){this.productDialog=!1,this.submitted=!1}saveProduct(){this.submitted=!0,this.product.name?.trim()&&(this.product.id?(this.products[this.findIndexById(this.product.id)]=this.product,this.messageService.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):(this.product.id=this.createId(),this.product.image="product-placeholder.svg",this.products.push(this.product),this.messageService.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3})),this.products=[...this.products],this.productDialog=!1,this.product={})}findIndexById(e){let s=-1;for(let o=0;o<this.products.length;o++)if(this.products[o].id===e){s=o;break}return s}createId(){let e="";for(var o=0;o<5;o++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}getSeverity(e){}onRowEditInit(e){this.clonedProducts[e.id]={...e}}onRowEditSave(e){e.price&&e.price>0?(delete this.clonedProducts[e.id],this.messageService.add({severity:"success",summary:"Success",detail:"Product is updated"})):this.messageService.add({severity:"error",summary:"Error",detail:"Invalid Price"})}onRowEditCancel(e,s){this.products[s]=this.clonedProducts[e.id],delete this.clonedProducts[e.id]}customSort(e){}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(l.ez),t.Y36(l.YP))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["crudgrid"]],inputs:{masterApiKey:"masterApiKey",headerName:"headerName",onlyGenderProps:"onlyGenderProps",cols:"cols"},outputs:{isEnabled:"isEnabled"},features:[t._Bn([l.ez,l.YP])],decls:4,vars:3,consts:[["pButton","","pRipple","","label","Create",1,"p-button-primary","p-1","m-2",3,"click"],[4,"ngIf"],[3,"showBlockui","target"],["t",""],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped ","scrollHeight","flex",3,"value","columns","paginator","rows","showCurrentPageReport","rowsPerPageOptions","tableStyle"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-center","p-1"],["class","text-left p-1",3,"pSortableColumn",4,"ngFor","ngForOf"],[1,"text-left","p-1",3,"pSortableColumn"],[3,"field",4,"ngIf"],[3,"field"],["class","m-1",3,"ngStyle",4,"ngFor","ngForOf"],[1,"m-1",3,"ngStyle"]],template:function(s,o){1&s&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.openNew()}),t.qZA(),t.YNc(1,D,6,9,"div",1),t._UZ(2,"blockui",2)(3,"p-toast")),2&s&&(t.xp6(1),t.Q6J("ngIf",o.products.length>0),t.xp6(1),t.Q6J("showBlockui",o.blocUI)("target","t"))},dependencies:[d.sg,d.O5,d.PC,f.Hq,l.jx,a.iA,a.lQ,a.fz,g.FN,v.l]})}return i})()}}]);