"use strict";(self.webpackChunksakiademo=self.webpackChunksakiademo||[]).push([[969],{9969:(de,h,n)=>{n.r(h),n.d(h,{UsersModule:()=>oe});var f=n(6814),v=n(2129),e=n(4769),m=n(5219),A=n(8645),u=n(9773),y=n(4850),S=n(6990),p=n(6223),E=n(707),_=n(3714),M=n(3965),C=n(6218),g=n(9552),b=n(9246),U=n(4104);const J=["aa"],w=["ab"],x=["ac"],I=["ad"],O=["ae"],N=["af"],q=["ag"];function G(i,o){1&i&&(e.TgZ(0,"tr")(1,"th",30)(2,"div",31),e._uU(3," Action "),e.qZA()(),e.TgZ(4,"th",32)(5,"div",31),e._uU(6," User Name "),e._UZ(7,"p-columnFilter",33),e.qZA()(),e.TgZ(8,"th",34)(9,"div",31),e._uU(10," Gender "),e._UZ(11,"p-columnFilter",35),e.qZA()(),e.TgZ(12,"th",36)(13,"div",31),e._uU(14," Cadre "),e._UZ(15,"p-columnFilter",37),e.qZA()(),e.TgZ(16,"th",36)(17,"div",31),e._uU(18," Description "),e.qZA()(),e.TgZ(19,"th",36)(20,"div",31),e._uU(21," Status "),e.qZA()()())}function D(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1,"Active"),e.qZA()),2&i&&e.Tol("customer-badge status-qualified")}function F(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1,"Inactive"),e.qZA()),2&i&&e.Tol("customer-badge status-unqualified")}function R(i,o){if(1&i){const l=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",38)(3,"div",39),e.NdJ("click",function(){const t=e.CHM(l).$implicit,a=e.oxw();return e.KtG(a.onClick(t,"VIEW"))}),e._UZ(4,"i",40),e.qZA(),e.TgZ(5,"div",39),e.NdJ("click",function(){const t=e.CHM(l).$implicit,a=e.oxw();return e.KtG(a.onClick(t,"EDIT"))}),e._UZ(6,"i",41),e.qZA()()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e.YNc(16,D,2,2,"span",42),e.YNc(17,F,2,2,"span",42),e.qZA()()}if(2&i){const l=o.$implicit;e.xp6(8),e.hij(" ",l.uname," "),e.xp6(2),e.hij(" ",l.gendername," "),e.xp6(2),e.hij(" ",l.cadername," "),e.xp6(2),e.hij(" ",l.desc," "),e.xp6(2),e.Q6J("ngIf",1==l.active),e.xp6(1),e.Q6J("ngIf",0==l.active)}}function Q(i,o){1&i&&(e.TgZ(0,"tr")(1,"td",43),e._uU(2,"No Users found."),e.qZA()())}function H(i,o){1&i&&(e.TgZ(0,"tr")(1,"td",43),e._uU(2,"Loading Users data. Please wait."),e.qZA()())}function P(i,o){if(1&i&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&i){const l=e.oxw();e.xp6(1),e.Oqu(l.errorMessages.master_name)}}function V(i,o){if(1&i&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&i){const l=e.oxw();e.xp6(1),e.Oqu(l.errorMessages.password)}}function W(i,o){if(1&i&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&i){const l=e.oxw();e.xp6(1),e.Oqu(l.errorMessages.gender)}}function j(i,o){if(1&i&&(e.TgZ(0,"small"),e._uU(1),e.qZA()),2&i){const l=e.oxw();e.xp6(1),e.Oqu(l.errorMessages.cader_id)}}const $=function(){return{width:"100%",right:"0",left:"0"}},k=function(i){return{"920px":i}};let L=(()=>{var i;class o{constructor(){this.isShowForm=!1,this.isShowSidebarClose=!1,this.isCloseOnEscape=!1,this.destroy$=new A.x,this.MessageService=(0,e.f3M)(m.ez),this._service=(0,e.f3M)(y.r),this.blocUI=!1,this.selectedState=null,this.states=[{name:"Arizona",code:"Arizona"},{name:"California",value:"California"},{name:"Florida",code:"Florida"},{name:"Ohio",code:"Ohio"},{name:"Washington",code:"Washington"}],this.dropdownItems=[{name:"Option 1",code:"Option 1"},{name:"Option 2",code:"Option 2"},{name:"Option 3",code:"Option 3"}],this.statuses=[{label:"Active",value:"qualified"},{label:"Inactive",value:"unqualified"},{label:"New",value:"new"},{label:"Negotiation",value:"negotiation"},{label:"Renewal",value:"renewal"},{label:"Proposal",value:"proposal"}],this.caders=[{label:"Select Cadre",value:null}],this.genderList=[{label:"Select Gender",value:null}],this.branches=[{label:"Select Branches",value:null,bcode:"",clientCount:0}],this.cities1=[],this.cities2=[],this.city1=null,this.city2=null,this.mode="",this.addressList=[],this.loading=!1,this.crudGrid=[],this.params={},this.createMaster={id:null,master_name:"",password:"",description:"",branch_id:null,gender:null,cader_id:null,dep_id:null,active:!0},this.defaultUser=JSON.stringify(this.createMaster),this.errorMessages={master_name:"",password:"",cader_id:"",gender:""},this.defErrs=JSON.stringify(this.errorMessages),this.fileSize=()=>this._service.fileMaxSize(),this.isOk=!1,this.submitloading=!1}getErrorMessages(r){switch(r){case"master_name":this.errorMessages.master_name=[void 0,null,""].includes(this.createMaster.master_name)?"Name is required":"";break;case"password":this.errorMessages.password=[void 0,null,""].includes(this.createMaster.password)?"Password is required":"";break;case"cader_id":this.errorMessages.cader_id=[void 0,null,""].includes(this.createMaster.cader_id)?"Cader is required":"";break;case"gender":this.errorMessages.gender=[void 0,null,""].includes(this.createMaster.gender)?"Gender is required":""}}ngOnInit(){let r=this._service.getUserInfo("userCader");"DA"==r.code&&(this.params.code="DEV"),"SA"==r.code&&(this.params.code="SA"),"HRPM"==r.code&&(this.params.code="HRPM",this.params.ctrl="filter"),this.params.create_by=this._service.getUserInfo("_id"),this._service.postApi("caders","postEndPoint",{cader:r.code}).pipe((0,u.R)(this.destroy$)).subscribe({next:s=>{200==(s=this._service.enableCryptoForResponse()?this._service.decrypt(s):s).S_CODE&&(this.caders=[{label:"Select Cadre",value:null}],s.DATA.forEach((t,a)=>{this.caders.push({label:t.cdname,value:t._id})}))},error:s=>{}}),this._service.postApi("getGenders","postEndPoint",{}).pipe((0,u.R)(this.destroy$)).subscribe({next:s=>{200==(s=this._service.enableCryptoForResponse()?this._service.decrypt(s):s).S_CODE&&(this.genderList=[{label:"Select Genders",value:null}],s.DATA.forEach((t,a)=>{this.genderList.push({label:t.gname,value:t._id})}))},error:s=>{}}),this.gridData()}gridData(){try{this.loading=!0;let r=this._service.getUserInfo("userCader");"DA"==r.code&&(this.params.code="DEV"),"SA"==r.code&&(this.params.code="SA"),"HRPM"==r.code&&(this.params.code="HRPM"),this.params.create_by=this._service.getUserInfo("_id"),this.crudGrid=[],this._service.postApi("smlgetusers","postEndPoint",this.params).pipe((0,u.R)(this.destroy$)).subscribe({next:s=>{200==(s=this._service.enableCryptoForResponse()?this._service.decrypt(s):s).S_CODE?(this.blocUI=!1,s.DATA.length>0&&(s.DATA.forEach((t,a)=>{this.crudGrid.push({active:t.active,cader:t.cader,cadername:t.cadername,desc:t.desc,gender:t.gender,gendername:t.gendername,id:t._id,uname:t.uname,dataKey:a+1,branch_id:t.branch_id,status:1==t.active?"Active":"Inactive"})}),this.crudGrid=s.DATA),this.loading=!1):300==s.S_CODE&&(this.blocUI=!1,this.loading=!1)},error:s=>{this.blocUI=!1}})}catch{this.blocUI=!1}}onSelect(r,s){try{if(![void 0,null,""].includes(r)&&Object.keys(r.files).length>0){const t=r.files[0];t&&this.uploadFile(t,s)}}catch{}}uploadFile(r,s){let t=new FileReader;t.onload=a=>{this.createMaster[s]=a.target.result},t.readAsDataURL(r),this.aa.clear(),this.ab.clear(),this.ac.clear(),this.ad.clear(),this.ae.clear(),this.af.clear(),this.ag.clear()}onClick(r,s){this.submitloading=!1,this.isShowForm=!0,this.isShowSidebarClose=!0,this.errorMessages=JSON.parse(this.defErrs),this.createMaster=JSON.parse(this.defaultUser),this.mode=s,["VIEW","EDIT"].includes(s)&&(this.createMaster={master_name:r.uname,password:null,description:r.desc,branch_id:r.uname,gender:r.gender,cader_id:r.cader,id:r.id,active:r.active})}saveProduct(){try{S.forEach(["master_name","password","gender","cader_id"],(a,d)=>{this.getErrorMessages(a)});let s=0;if(Object.values(this.errorMessages).every((a,d)=>{""==a&&s++}),s>0){this.submitloading=!0;let a=JSON.parse(JSON.stringify(this.createMaster));a.flag="NEW"==this.mode||""==this.mode?"S":"E",a.uname=this.createMaster.master_name.trim(),a.password=this.createMaster.password,a.cader=this.createMaster.cader_id,a.department=this.createMaster.dep_id,a.create_by=this._service.getUserInfo("_id"),delete a.master_name,delete a.branch_id,delete a.cader_id,this._service.postApi("smlusers","postEndPoint",a).pipe((0,u.R)(this.destroy$)).subscribe({next:c=>{200==(c=this._service.enableCryptoForResponse()?this._service.decrypt(c):c).S_CODE?(this.isShowSidebarClose=!1,this.MessageService.add({severity:"success",summary:"Success",detail:`${c.S_MSG}`}),this.isOk=!0,this.createMaster=JSON.parse(this.defaultUser),this.submitloading=!1):300==c.S_CODE&&(this.MessageService.add({severity:"error",summary:"Error",detail:`${c.S_MSG}`}),this.isShowSidebarClose=!1,this.submitloading=!1)},error:c=>{this.submitloading=!1}})}}catch{}}hideDialog(){this.isShowForm=!1,this.createMaster=JSON.parse(this.defaultUser),this.errorMessages=JSON.parse(this.defErrs)}onMessageClose(){this.isOk&&(this.isShowSidebarClose=!0,this.gridData(),this.hideDialog())}checkForValidUser(){this.MessageService.clear();try{let r=!!["",void 0,null,0].includes(this.createMaster.master_name.trim());if(this.errorMessages.master_name=r?"User name  is required":"",r)return;[void 0,null,""].includes(this.createMaster.master_name)||(this.createMaster.master_name=this.createMaster.master_name.trim()),this._service.postApi("forgotpwd","postEndPoint",{flag:"S",uname:this.createMaster.master_name}).subscribe(s=>{200==(s=this._service.enableCryptoForResponse()?this._service.decrypt(s):s).S_CODE?this.errorMessages.master_name="User Already exists":300==s.S_CODE&&(this.errorMessages.master_name="")})}catch{}}}return(i=o).\u0275fac=function(r){return new(r||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-users"]],viewQuery:function(r,s){if(1&r&&(e.Gf(J,5),e.Gf(w,5),e.Gf(x,5),e.Gf(I,5),e.Gf(O,5),e.Gf(N,5),e.Gf(q,5)),2&r){let t;e.iGM(t=e.CRH())&&(s.aa=t.first),e.iGM(t=e.CRH())&&(s.ab=t.first),e.iGM(t=e.CRH())&&(s.ac=t.first),e.iGM(t=e.CRH())&&(s.ad=t.first),e.iGM(t=e.CRH())&&(s.ae=t.first),e.iGM(t=e.CRH())&&(s.af=t.first),e.iGM(t=e.CRH())&&(s.ag=t.first)}},features:[e._Bn([m.ez,m.YP])],decls:57,vars:38,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex","align-items-center","justify-content-center","w-10rem","h-2rem","font-bold","border-round","m-2"],[1,"flex","align-items-center","justify-content-center","w-0rem","h-0","font-bold","border-round","m-1"],["pButton","","pRipple","","label","Add new",1,"p-button-success",3,"loading","click"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator"],["dt1",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[3,"visible","fullScreen","showCloseIcon","closeOnEscape","visibleChange"],[1,"col-12","col-offset-0","md:col-6","md:col-offset-3","lg:col-4","lg:col-offset-4","xl:col-4","xl:col-offset-4"],[1,"card","p-fluid"],["htmlFor","name1"],["id","firstname2","type","text","pInputText","",1,"p-2","ng-invalid","ng-dirty",3,"autocomplete","ngModel","disabled","change","ngModelChange"],[4,"ngIf"],["for","firstname2"],["id","firstname2","type","text","pInputText","",1,"ng-invalid","ng-dirty",3,"ngModel","disabled","ngModelChange"],[3,"options","ngModel","filter","disabled","ngModelChange"],["htmlFor","state"],["rows","5","cols","30","pInputTextarea","",3,"disabled","ngModel","ngModelChange"],["type","checkbox","name","master","id","1",3,"ngModel","disabled","ngModelChange"],["for","lastname2",1,"ml-2"],[1,"col-6"],["pButton","","pRipple","","label","Clear",1,"p-button-outlined",3,"disabled","click"],["pButton","","pRipple","","label","Submit",1,"p-button-success",3,"disabled","loading","click"],["position","top-right",3,"breakpoints","onClose"],[2,"min-width","5rem"],[1,"flex","justify-content-between","align-items-center"],[2,"min-width","18rem"],["type","text","field","uname","display","menu","placeholder","Search by name"],[2,"min-width","4rem"],["type","text","field","gendername","display","menu","placeholder","Search by gender"],[2,"min-width","12rem"],["type","text","field","cadername","display","menu","placeholder","Search by Cadre"],[1,"flex","justify-content-center","flex-wrap"],[1,"flex","align-items-center","ml-1",3,"click"],[1,"pi","pi-eye"],[1,"pi","pi-file-edit"],[3,"class",4,"ngIf"],["colspan","6"]],template:function(r,s){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Users List "),e.qZA(),e._UZ(6,"div",5),e.TgZ(7,"div",4)(8,"button",6),e.NdJ("click",function(){return s.onClick(null,"NEW")}),e.qZA()()(),e.TgZ(9,"p-table",7,8),e.YNc(11,G,22,0,"ng-template",9),e.YNc(12,R,18,6,"ng-template",10),e.YNc(13,Q,3,0,"ng-template",11),e.YNc(14,H,3,0,"ng-template",12),e.qZA()()()(),e.TgZ(15,"p-sidebar",13),e.NdJ("visibleChange",function(a){return s.isShowForm=a}),e.TgZ(16,"div",0)(17,"div",14)(18,"div",15)(19,"div",0)(20,"h5"),e._uU(21,"Create User "),e.qZA(),e.TgZ(22,"div",1)(23,"label",16),e._uU(24,"User Name"),e.qZA(),e.TgZ(25,"input",17),e.NdJ("change",function(){return s.checkForValidUser()})("ngModelChange",function(a){return s.createMaster.master_name=a}),e.qZA(),e.YNc(26,P,2,1,"small",18),e.qZA(),e.TgZ(27,"div",1)(28,"label",19),e._uU(29,"password"),e.qZA(),e.TgZ(30,"input",20),e.NdJ("ngModelChange",function(a){return s.createMaster.password=a}),e.qZA(),e.YNc(31,V,2,1,"small",18),e.qZA(),e.TgZ(32,"div",1)(33,"label",19),e._uU(34,"Gender"),e.qZA(),e.TgZ(35,"p-dropdown",21),e.NdJ("ngModelChange",function(a){return s.createMaster.gender=a}),e.qZA(),e.YNc(36,W,2,1,"small",18),e.qZA(),e.TgZ(37,"div",1)(38,"label",19),e._uU(39,"Cadre"),e.qZA(),e.TgZ(40,"p-dropdown",21),e.NdJ("ngModelChange",function(a){return s.createMaster.cader_id=a}),e.qZA(),e.YNc(41,j,2,1,"small",18),e.qZA(),e.TgZ(42,"div",1)(43,"label",22),e._uU(44,"Description "),e.qZA(),e.TgZ(45,"textarea",23),e.NdJ("ngModelChange",function(a){return s.createMaster.description=a}),e.qZA()(),e.TgZ(46,"div",1)(47,"input",24),e.NdJ("ngModelChange",function(a){return s.createMaster.active=a}),e.qZA(),e.TgZ(48,"label",25),e._uU(49,"Active"),e.qZA()(),e.TgZ(50,"div",1)(51,"div",0)(52,"div",26)(53,"button",27),e.NdJ("click",function(){return s.hideDialog()}),e.qZA()(),e.TgZ(54,"div",26)(55,"button",28),e.NdJ("click",function(){return s.saveProduct()}),e.qZA()()()()()()()()(),e.TgZ(56,"p-toast",29),e.NdJ("onClose",function(){return s.onMessageClose()}),e.qZA()),2&r&&(e.xp6(8),e.Q6J("loading",!1),e.xp6(1),e.Q6J("value",s.crudGrid)("rows",10)("loading",s.loading)("rowHover",!0)("paginator",!0),e.xp6(6),e.Q6J("visible",s.isShowForm)("fullScreen",!0)("showCloseIcon",s.isShowSidebarClose)("closeOnEscape",s.isCloseOnEscape),e.xp6(10),e.Q6J("autocomplete","off")("ngModel",s.createMaster.master_name)("disabled","VIEW"==s.mode),e.xp6(1),e.Q6J("ngIf",""!=s.errorMessages.master_name),e.xp6(4),e.Q6J("ngModel",s.createMaster.password)("disabled","VIEW"==s.mode),e.xp6(1),e.Q6J("ngIf",""!=s.errorMessages.password),e.xp6(4),e.Q6J("options",s.genderList)("ngModel",s.createMaster.gender)("filter",!0)("disabled","VIEW"==s.mode),e.xp6(1),e.Q6J("ngIf",""!=s.errorMessages.gender),e.xp6(4),e.Q6J("options",s.caders)("ngModel",s.createMaster.cader_id)("filter",!0)("disabled","VIEW"==s.mode),e.xp6(1),e.Q6J("ngIf",""!=s.errorMessages.cader_id),e.xp6(4),e.Q6J("disabled","VIEW"==s.mode)("ngModel",s.createMaster.description),e.xp6(2),e.Q6J("ngModel",s.createMaster.active)("disabled","VIEW"==s.mode||"NEW"==s.mode),e.xp6(6),e.Q6J("disabled","VIEW"==s.mode),e.xp6(2),e.Q6J("disabled","VIEW"==s.mode)("loading",s.submitloading),e.xp6(1),e.Q6J("breakpoints",e.VKq(36,k,e.DdM(35,$))))},dependencies:[f.O5,p.Fj,p.Wl,p.JJ,p.On,m.jx,E.Hq,_.o,M.Lt,C.g,g.iA,g.xl,b.Y,U.FN],styles:["app-users[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow:hidden}","[_nghost-%COMP%]     .p-cascadeselect-items {\n        max-height: 100px;\n        overflow: auto;\n    }"]}),o})(),Y=(()=>{var i;class o{}return(i=o).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[v.Bz.forChild([{path:"",component:L}]),v.Bz]}),o})();var z=n(7327),B=n(6760),K=n(1480),X=n(9663),Z=n(5167),T=n(8062),ee=n(4055),se=n(7902),te=n(6651),ie=n(6782),re=n(2892),ae=n(3722),ne=n(8039),le=n(8676);let oe=(()=>{var i;class o{}return(i=o).\u0275fac=function(r){return new(r||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.ez,Y,p.u5,z.WN,B._8,K.Gg,M.kW,X.zz,Z.L$,T.XH,ee.q4,C.A,_.j,g.U$,se.JH,te.q,b.l,ie.kK,T.XH,ae.O,re.$,Z.L$,U.EV,ne.F,le.Q]}),o})()}}]);