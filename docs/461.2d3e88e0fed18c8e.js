"use strict";(self.webpackChunksakiademo=self.webpackChunksakiademo||[]).push([[461],{4461:(V,v,t)=>{t.r(v),t.d(v,{PermissionsModule:()=>Y});var d=t(6814),h=t(2129),s=t(4769),f=t(5219),M=t(8645),m=t(9773),P=t(4850),c=t(6990),u=t(6223),A=t(707),C=t(4104),y=t(1865),g=t(5389);function O(o,l){if(1&o){const r=s.EpF();s.TgZ(0,"li",15),s._uU(1),s.TgZ(2,"div",16)(3,"p-radioButton",17),s.NdJ("ngModelChange",function(n){const i=s.CHM(r).$implicit;return s.KtG(i.isCanDo=n)})("onClick",function(n){const i=s.CHM(r).$implicit,a=s.oxw(2);return s.KtG(a.onPermissionClick(n,i))}),s.qZA(),s.TgZ(4,"label",18),s._uU(5,"Yes"),s.qZA(),s.TgZ(6,"p-radioButton",19),s.NdJ("ngModelChange",function(n){const i=s.CHM(r).$implicit;return s.KtG(i.isCanDo=n)})("onClick",function(n){const i=s.CHM(r).$implicit,a=s.oxw(2);return s.KtG(a.onPermissionClick(n,i))}),s.qZA(),s.TgZ(7,"label",20),s._uU(8,"No"),s.qZA()()()}if(2&o){const r=l.$implicit,e=s.oxw().$implicit;s.xp6(1),s.hij(" ",r.name," "),s.xp6(2),s.Q6J("ngModel",r.isCanDo)("disabled","AD"==e.code),s.xp6(3),s.Q6J("ngModel",r.isCanDo)("disabled","AD"==e.code)}}function J(o,l){if(1&o&&(s.TgZ(0,"div",11)(1,"div",12),s._uU(2),s.qZA(),s.TgZ(3,"ul",13),s.YNc(4,O,9,5,"li",14),s.qZA()()),2&o){const r=l.$implicit;s.xp6(2),s.hij(" ",r.cader," "),s.xp6(2),s.Q6J("ngForOf",r.modules)}}const T=function(){return{width:"100%",right:"0",left:"0"}},Z=function(o){return{"920px":o}};let N=(()=>{var o;class l{constructor(){this.destroy$=new M.x,this.usersList=[],this.createMaster={uname:"",uid:""},this.MessageService=(0,s.f3M)(f.ez),this._service=(0,s.f3M)(P.r),this.loading=!1,this.showSubmit=!0,this.permissionJSON=[],this.userApprovals=[],this.isOk=!1,this.loadings=!1}ngOnInit(){this._service.postApi("smlgetusers","postEndPoint",{code:"HRPM",ctrl:"nofilter"}).pipe((0,m.R)(this.destroy$)).subscribe({next:e=>{200==(e=this._service.enableCryptoForResponse()?this._service.decrypt(e):e).S_CODE&&(this.usersList=c.filter(e.DATA,(n,p)=>1==n.active),c.forEach(this.usersList,(n,p)=>{this.userApprovals.push({userId:n.id,username:n.uname,isCanDo:"N",name:"Loan Approvals",path:"/home/uikit/loanapprovals"})}))},error:e=>{}}),this.getPermissions()}getPermissions(){try{this._service.getUserInfo("userCader"),this.permissionJSON=[],this._service.postApi("pagepermissionsList","postEndPoint",{}).pipe((0,m.R)(this.destroy$)).subscribe({next:n=>{200==(n=this._service.enableCryptoForResponse()?this._service.decrypt(n):n).S_CODE&&n.DATA.length>0&&(this.permissionJSON=n.DATA)},error:n=>{}})}catch{}}saveProduct(){let e=[],n=JSON.parse(JSON.stringify(this.permissionJSON));c.forEach(n,(i,a)=>{let X={cader:i.cader,_id:i._id,modules:i.modules.filter((k,_)=>k.isSelected)};e.push(X)}),e=c.filter(e,(i,a)=>i.modules.length>0),this._service.postApi("updatepermissions","postEndPoint",e).pipe((0,m.R)(this.destroy$)).subscribe({next:i=>{200==(i=this._service.enableCryptoForResponse()?this._service.decrypt(i):i).S_CODE?(this.getPermissions(),this.MessageService.add({severity:"success",summary:"Success",detail:`${i.S_MSG}`}),this.isOk=!0,this.loading=!1):300==i.S_CODE&&(this.MessageService.add({severity:"error",summary:"Error",detail:`${i.S_MSG}`}),this.isOk=!0,this.loading=!1)},error:i=>{this.loading=!1}})}savePermissionProduct(){let e=[];JSON.parse(JSON.stringify(this.userApprovals)),e=c.filter(e,(i,a)=>i.modules.length>0),this._service.postApi("loanApprovalpermission","postEndPoint",e).pipe((0,m.R)(this.destroy$)).subscribe({next:i=>{200==(i=this._service.enableCryptoForResponse()?this._service.decrypt(i):i).S_CODE?(this.getPermissions(),this.MessageService.add({severity:"success",summary:"Success",detail:`${i.S_MSG}`}),this.isOk=!0,this.loadings=!1):300==i.S_CODE&&(this.MessageService.add({severity:"error",summary:"Error",detail:`${i.S_MSG}`}),this.isOk=!0,this.loadings=!1)},error:i=>{this.loadings=!1}})}onMessageClose(){}onPermissionClick(e,n){try{e.value&&(this.showSubmit=!1,n.isSelected=!0)}catch{}}}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=s.Xpm({type:o,selectors:[["app-permissions"]],features:[s._Bn([f.ez])],decls:14,vars:8,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex","align-items-center","justify-content-center","w-10rem","h-2rem","font-bold","border-round","m-2"],[3,"multiple"],["header","Module Access by Cadre",1,"m-1"],["pButton","","pRipple","","label","Save","icon","pi pi-check","styleClass","p-button-rounded ",1,"",3,"disabled","loading","click"],[1,"main_crt_mstrs"],["class","crt_mstrs",4,"ngFor","ngForOf"],["position","top-right",3,"breakpoints","onClose"],[1,"crt_mstrs"],[1,"crt_mstrs_pstn","text-xl"],[1,"crt_mstrs_lst",2,"list-style-type","none","margin","0"],["class","p-2",4,"ngFor","ngForOf"],[1,"p-2"],[1,"field-radiobutton","m-1"],["name","city","value","Y","id","city1",3,"ngModel","disabled","ngModelChange","onClick"],["for","city1",1,"mr-1"],["name","city","value","N","id","city2",3,"ngModel","disabled","ngModelChange","onClick"],["for","city2"]],template:function(e,n){1&e&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),s._uU(5," Alter Permissions "),s.qZA(),s._UZ(6,"div",4),s.qZA(),s.TgZ(7,"p-accordion",5)(8,"p-accordionTab",6)(9,"div",4)(10,"button",7),s.NdJ("click",function(){return n.saveProduct()}),s.qZA()(),s.TgZ(11,"div",8),s.YNc(12,J,5,2,"div",9),s.qZA()()()()()(),s.TgZ(13,"p-toast",10),s.NdJ("onClose",function(){return n.onMessageClose()}),s.qZA()),2&e&&(s.xp6(7),s.Q6J("multiple",!1),s.xp6(3),s.Q6J("disabled",n.showSubmit)("loading",n.loading),s.xp6(2),s.Q6J("ngForOf",n.permissionJSON),s.xp6(1),s.Q6J("breakpoints",s.VKq(6,Z,s.DdM(5,T))))},dependencies:[d.sg,u.JJ,u.On,A.Hq,C.FN,y.EU,g.UQ,g.US],styles:[".main_crt_mstrs[_ngcontent-%COMP%] {\n        margin-top: 10px;\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n    }\n\n    .crt_mstrs[_ngcontent-%COMP%] {\n        border-radius: 3px;\n        position: relative;\n        padding-top: 5px;\n        font-weight: bold;\n        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;\n    }\n\n    .crt_mstrs_pstn[_ngcontent-%COMP%] {\n        position: absolute;\n        top: -10px;\n        left: 10px;\n        background-color: #fff;\n        padding: 0 5px;\n        color: #033fa0;\n    }\n\n    .crt_mstrs_lst[_ngcontent-%COMP%] {\n        display: flex;\n        gap: 5px;\n        flex-wrap: wrap;\n        padding: 10px;\n    }"]}),l})(),$=(()=>{var o;class l{}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[h.Bz.forChild([{path:"",component:N}]),h.Bz]}),l})();var b=t(7327),D=t(6760),E=t(1480),F=t(3965),R=t(9663),x=t(5167),S=t(8062),B=t(4055),U=t(6218),G=t(3714),H=t(9552),j=t(7902),z=t(6651),I=t(9246),Q=t(6782),L=t(2892),K=t(3722);let Y=(()=>{var o;class l{}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[d.ez,$,d.ez,u.u5,b.WN,D._8,E.Gg,F.kW,R.zz,x.L$,S.XH,B.q4,U.A,G.j,H.U$,j.JH,z.q,I.l,Q.kK,S.XH,K.O,L.$,x.L$,C.EV,y.cc,g.fx]}),l})()}}]);