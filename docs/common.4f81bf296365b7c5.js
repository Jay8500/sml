"use strict";(self.webpackChunksml=self.webpackChunksml||[]).push([[592],{7992:(S,u,r)=>{r.d(u,{w:()=>A});var t=r(4769),c=r(5219),_=r(8645),m=r(9773),h=r(4850),p=r(6814),l=r(95),g=r(707),d=r(3702),f=r(4104),v=r(5195);function C(i,n){if(1&i&&(t.TgZ(0,"div",8)(1,"h5",9),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Oqu(e.headerName)}}function P(i,n){if(1&i&&t._UZ(0,"p-sortIcon",13),2&i){const e=t.oxw().$implicit;t.Q6J("field",e.field)}}function E(i,n){if(1&i&&(t.TgZ(0,"th",11),t._uU(1),t.YNc(2,P,1,1,"p-sortIcon",12),t.qZA()),2&i){const e=n.$implicit;t.Akn(e.style),t.Q6J("pSortableColumn",e.field),t.xp6(1),t.hij(" ",e.header," "),t.xp6(1),t.Q6J("ngIf",e.showSort)}}function T(i,n){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,E,3,5,"th",10),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.cols)}}function w(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"input",18),t.NdJ("ngModelChange",function(o){t.CHM(e);const a=t.oxw().$implicit,b=t.oxw().$implicit;return t.KtG(b[a.field]=o)}),t.qZA()}if(2&i){const e=t.oxw().$implicit,s=t.oxw().$implicit;t.Q6J("ngModel",s[e.field])}}function y(i,n){if(1&i&&t._uU(0),2&i){const e=t.oxw().$implicit,s=t.oxw().$implicit;t.hij(" ",s[e.field]," ")}}function O(i,n){if(1&i&&(t.TgZ(0,"td")(1,"p-cellEditor"),t.YNc(2,w,1,1,"ng-template",16),t.YNc(3,y,1,1,"ng-template",17),t.qZA()()),2&i){const e=n.index,s=t.oxw().columns;t.Akn(s[e].style)}}function x(i,n){if(1&i&&(t.TgZ(0,"tr",14),t.YNc(1,O,4,2,"td",15),t.qZA()),2&i){const s=n.columns;t.Q6J("pEditableRow",n.$implicit),t.xp6(1),t.Q6J("ngForOf",s)}}const D=function(){return[10,25,50]},I=function(){return{"min-width":"70rem",margin:"1rem"}};function M(i,n){if(1&i&&(t.TgZ(0,"div")(1,"p-table",3,4),t.YNc(3,C,3,1,"ng-template",5),t.YNc(4,T,2,1,"ng-template",6),t.YNc(5,x,2,2,"ng-template",7),t.qZA()()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("value",e.products)("columns",e.cols)("paginator",!0)("rows",e.products.length)("showCurrentPageReport",!0)("rowsPerPageOptions",t.DdM(7,D))("tableStyle",t.DdM(8,I))}}let A=(()=>{class i{constructor(e,s){this.messageService=e,this.confirmationService=s,this.masterApiKey="",this.headerName="Mange Headers",this.productDialog=!1,this.clonedProducts={},this.products=[],this.submitted=!1,this.blocUI=!1,this._service=(0,t.f3M)(h.r),this.destroy$=new _.x,this.isEnabled=new t.vpe}ngOnInit(){this.blocUI=!0,this.gridData(),setInterval(()=>this.blocUI=!1,4e3),this.statuses=[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]}gridData(){this._service.postApi(this.masterApiKey,"postEndPoint",null).pipe((0,m.R)(this.destroy$)).subscribe({next:e=>{200==e.S_CODE&&(this.products=[],e.DATA.forEach((s,o)=>{let a={...this.onlyGenderProps,...s};this.products.push(a)}))},error:e=>{this.blocUI=!1}})}openNew(){this.product={},this.submitted=!1,this.isEnabled.emit(!0),this.productDialog=!0}deleteSelectedProducts(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected products?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(e=>!this.selectedProducts?.includes(e)),this.selectedProducts=null,this.messageService.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})}})}editProduct(e){this.product={...e},this.productDialog=!0}deleteProduct(e){this.confirmationService.confirm({message:"Are you sure you want to delete "+e.name+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(s=>s.id!==e.id),this.product={},this.messageService.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})}})}hideDialog(){this.productDialog=!1,this.submitted=!1}saveProduct(){this.submitted=!0,this.product.name?.trim()&&(this.product.id?(this.products[this.findIndexById(this.product.id)]=this.product,this.messageService.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):(this.product.id=this.createId(),this.product.image="product-placeholder.svg",this.products.push(this.product),this.messageService.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3})),this.products=[...this.products],this.productDialog=!1,this.product={})}findIndexById(e){let s=-1;for(let o=0;o<this.products.length;o++)if(this.products[o].id===e){s=o;break}return s}createId(){let e="";for(var o=0;o<5;o++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}getSeverity(e){}onRowEditInit(e){this.clonedProducts[e.id]={...e}}onRowEditSave(e){e.price&&e.price>0?(delete this.clonedProducts[e.id],this.messageService.add({severity:"success",summary:"Success",detail:"Product is updated"})):this.messageService.add({severity:"error",summary:"Error",detail:"Invalid Price"})}onRowEditCancel(e,s){this.products[s]=this.clonedProducts[e.id],delete this.clonedProducts[e.id]}customSort(e){}static#t=this.\u0275fac=function(s){return new(s||i)(t.Y36(c.ez),t.Y36(c.YP))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["crudgrid"]],inputs:{masterApiKey:"masterApiKey",headerName:"headerName",onlyGenderProps:"onlyGenderProps",cols:"cols"},outputs:{isEnabled:"isEnabled"},features:[t._Bn([c.ez,c.YP])],decls:4,vars:3,consts:[["pButton","","pRipple","","label","Create",1,"p-button-primary","p-1",3,"click"],[4,"ngIf"],[3,"showBlockui","target"],["editMode","row","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-gridlines",3,"value","columns","paginator","rows","showCurrentPageReport","rowsPerPageOptions","tableStyle"],["t",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-start","p-1"],[1,"m-0"],[3,"style","pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field",4,"ngIf"],[3,"field"],[3,"pEditableRow"],[3,"style",4,"ngFor","ngForOf"],["pTemplate","input"],["pTemplate","output"],["pInputText","","type","text","required","",3,"ngModel","ngModelChange"]],template:function(s,o){1&s&&(t._UZ(0,"p-toast"),t.TgZ(1,"button",0),t.NdJ("click",function(){return o.openNew()}),t.qZA(),t.YNc(2,M,6,9,"div",1),t._UZ(3,"blockui",2)),2&s&&(t.xp6(2),t.Q6J("ngIf",o.products.length>0),t.xp6(1),t.Q6J("showBlockui",o.blocUI)("target","t"))},dependencies:[p.sg,p.O5,l.Fj,l.JJ,l.Q7,l.On,g.Hq,c.jx,d.iA,d.lQ,d.YL,d.fz,d.D$,f.FN,v.l]})}return i})()}}]);