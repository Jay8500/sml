"use strict";(self.webpackChunksakiademo=self.webpackChunksakiademo||[]).push([[461],{4461:(W,g,n)=>{n.r(g),n.d(g,{PermissionsModule:()=>L});var d=n(6814),u=n(2129),s=n(4769),v=n(5219),P=n(8645),f=n(9773),S=n(4850),C=n(6990),m=n(6223),O=n(707),h=n(4104),x=n(1865),p=n(5389);function J(e,l){if(1&e){const r=s.EpF();s.TgZ(0,"li",15),s._uU(1),s.TgZ(2,"div",16)(3,"p-radioButton",17),s.NdJ("ngModelChange",function(i){const o=s.CHM(r).$implicit;return s.KtG(o.isCanDo=i)})("onClick",function(i){const o=s.CHM(r).$implicit,c=s.oxw(2);return s.KtG(c.onPermissionClick(i,o))}),s.qZA(),s.TgZ(4,"label",18),s._uU(5,"Yes"),s.qZA(),s.TgZ(6,"p-radioButton",19),s.NdJ("ngModelChange",function(i){const o=s.CHM(r).$implicit;return s.KtG(o.isCanDo=i)})("onClick",function(i){const o=s.CHM(r).$implicit,c=s.oxw(2);return s.KtG(c.onPermissionClick(i,o))}),s.qZA(),s.TgZ(7,"label",20),s._uU(8,"No"),s.qZA()()()}if(2&e){const r=l.$implicit,t=s.oxw().$implicit;s.xp6(1),s.hij(" ",r.name," "),s.xp6(2),s.Q6J("ngModel",r.isCanDo)("disabled","AD"==t.code),s.xp6(3),s.Q6J("ngModel",r.isCanDo)("disabled","AD"==t.code)}}function A(e,l){if(1&e&&(s.TgZ(0,"div",11)(1,"div",12),s._uU(2),s.qZA(),s.TgZ(3,"ul",13),s.YNc(4,J,9,5,"li",14),s.qZA()()),2&e){const r=l.$implicit;s.xp6(2),s.hij(" ",r.cader," "),s.xp6(2),s.Q6J("ngForOf",r.modules)}}const T=function(){return{width:"100%",right:"0",left:"0"}},Z=function(e){return{"920px":e}};let N=(()=>{var e;class l{constructor(){this.destroy$=new P.x,this.MessageService=(0,s.f3M)(v.ez),this._service=(0,s.f3M)(S.r),this.loading=!1,this.showSubmit=!0,this.permissionJSON=[],this.isOk=!1}ngOnInit(){this.getPermissions()}getPermissions(){try{this._service.getUserInfo("userCader"),this.permissionJSON=[],this._service.postApi("pagepermissionsList","postEndPoint",{}).pipe((0,f.R)(this.destroy$)).subscribe({next:i=>{200==(i=this._service.enableCryptoForResponse()?this._service.decrypt(i):i).S_CODE&&i.DATA.length>0&&(this.permissionJSON=i.DATA)},error:i=>{}})}catch{}}saveProduct(){let t=[],i=JSON.parse(JSON.stringify(this.permissionJSON));C.forEach(i,(o,c)=>{let X={cader:o.cader,_id:o._id,modules:o.modules.filter((V,w)=>V.isSelected)};t.push(X)}),t=C.filter(t,(o,c)=>o.modules.length>0),this._service.postApi("updatepermissions","postEndPoint",t).pipe((0,f.R)(this.destroy$)).subscribe({next:o=>{200==(o=this._service.enableCryptoForResponse()?this._service.decrypt(o):o).S_CODE?(this.getPermissions(),this.MessageService.add({severity:"success",summary:"Success",detail:`${o.S_MSG}`}),this.isOk=!0,this.loading=!1):300==o.S_CODE&&(this.MessageService.add({severity:"error",summary:"Error",detail:`${o.S_MSG}`}),this.isOk=!0,this.loading=!1)},error:o=>{this.loading=!1}})}onMessageClose(){}onPermissionClick(t,i){try{t.value&&(this.showSubmit=!1,i.isSelected=!0)}catch{}}}return(e=l).\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-permissions"]],features:[s._Bn([v.ez])],decls:14,vars:8,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex","align-items-center","justify-content-center","w-10rem","h-2rem","font-bold","border-round","m-2"],["pButton","","pRipple","","label","Save","icon","pi pi-check","styleClass","p-button-rounded ",1,"",3,"disabled","loading","click"],[3,"multiple"],["header","Module Access"],[1,"main_crt_mstrs"],["class","crt_mstrs",4,"ngFor","ngForOf"],["position","top-right",3,"breakpoints","onClose"],[1,"crt_mstrs"],[1,"crt_mstrs_pstn","text-xl"],[1,"crt_mstrs_lst",2,"list-style-type","none","margin","0"],["class","p-2",4,"ngFor","ngForOf"],[1,"p-2"],[1,"field-radiobutton","m-1"],["name","city","value","Y","id","city1",3,"ngModel","disabled","ngModelChange","onClick"],["for","city1",1,"mr-1"],["name","city","value","N","id","city2",3,"ngModel","disabled","ngModelChange","onClick"],["for","city2"]],template:function(t,i){1&t&&(s.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),s._uU(5," Alter Permissions "),s.qZA(),s._UZ(6,"div",4),s.TgZ(7,"div",4)(8,"button",5),s.NdJ("click",function(){return i.saveProduct()}),s.qZA()()(),s.TgZ(9,"p-accordion",6)(10,"p-accordionTab",7)(11,"div",8),s.YNc(12,A,5,2,"div",9),s.qZA()()()()()(),s.TgZ(13,"p-toast",10),s.NdJ("onClose",function(){return i.onMessageClose()}),s.qZA()),2&t&&(s.xp6(8),s.Q6J("disabled",i.showSubmit)("loading",i.loading),s.xp6(1),s.Q6J("multiple",!1),s.xp6(3),s.Q6J("ngForOf",i.permissionJSON),s.xp6(1),s.Q6J("breakpoints",s.VKq(6,Z,s.DdM(5,T))))},dependencies:[d.sg,m.JJ,m.On,O.Hq,h.FN,x.EU,p.UQ,p.US],styles:[".main_crt_mstrs[_ngcontent-%COMP%] {\n        margin-top: 10px;\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n    }\n\n    .crt_mstrs[_ngcontent-%COMP%] {\n        border-radius: 3px;\n        position: relative;\n        padding-top: 5px;\n        font-weight: bold;\n        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;\n    }\n\n    .crt_mstrs_pstn[_ngcontent-%COMP%] {\n        position: absolute;\n        top: -10px;\n        left: 10px;\n        background-color: #fff;\n        padding: 0 5px;\n        color: #033fa0;\n    }\n\n    .crt_mstrs_lst[_ngcontent-%COMP%] {\n        display: flex;\n        gap: 5px;\n        flex-wrap: wrap;\n        padding: 10px;\n    }"]}),l})(),$=(()=>{var e;class l{}return(e=l).\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[u.Bz.forChild([{path:"",component:N}]),u.Bz]}),l})();var D=n(7327),F=n(6760),b=n(1480),B=n(3965),U=n(9663),y=n(5167),M=n(8062),E=n(4055),j=n(6218),z=n(3714),H=n(9552),Q=n(7902),R=n(6651),G=n(9246),K=n(6782),I=n(2892),Y=n(3722);let L=(()=>{var e;class l{}return(e=l).\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[d.ez,$,d.ez,m.u5,D.WN,F._8,b.Gg,B.kW,U.zz,y.L$,M.XH,E.q4,j.A,z.j,H.U$,Q.JH,R.q,G.l,K.kK,M.XH,Y.O,I.$,y.L$,h.EV,x.cc,p.fx]}),l})()}}]);