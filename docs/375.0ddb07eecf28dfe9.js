"use strict";(self.webpackChunksakiademo=self.webpackChunksakiademo||[]).push([[375],{5375:(re,T,r)=>{r.r(T),r.d(T,{TeamModule:()=>te});var h=r(6814),x=r(2129),v=r(5861),e=r(4769),M=r(5219),J=r(8645),b=r(9773),U=r(9315),B=r(4850),m=r(6990),f=r(6223),$=r(707),y=r(3965),S=r(4104);function F(s,d){if(1&s){const o=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.saveProduct())}),e.qZA()}if(2&s){const o=e.oxw();e.Q6J("disabled",o.showSubmit)("loading",o.loading)}}function D(s,d){if(1&s){const o=e.EpF();e.TgZ(0,"li")(1,"input",15),e.NdJ("ngModelChange",function(t){const c=e.CHM(o).$implicit;return e.KtG(c.isChecked=t)})("change",function(t){const c=e.CHM(o).$implicit,l=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onUserChecked(t,l.users,c,l))}),e.qZA(),e._uU(2),e.qZA()}if(2&s){const o=d.$implicit;e.xp6(1),e.Q6J("id","d__{{userId}}")("ngModel",o.isChecked),e.xp6(1),e.hij(" ",o.uname," ")}}function P(s,d){if(1&s&&(e.TgZ(0,"div",11)(1,"div",12),e._uU(2),e.qZA(),e.TgZ(3,"ul",13),e.YNc(4,D,3,3,"li",14),e.qZA()()),2&s){const o=d.$implicit;e.xp6(2),e.hij(" ",o.cdname," "),e.xp6(2),e.Q6J("ngForOf",o.users)}}const N=function(){return[void 0,null,""]},R=function(){return{width:"100%",right:"0",left:"0"}},j=function(s){return{"920px":s}};let z=(()=>{var s;class d{constructor(){this.showSubmit=!0,this.blocUI=!1,this.genderList=[],this.caders=[],this.createTeam=[],this.loading=!1,this._service=(0,e.f3M)(B.r),this.destroy$=new J.x,this.MessageService=(0,e.f3M)(M.ez),this.mode="",this.createMaster={branch_id:null,cader_id:null},this.store=[],this.editer=[]}ngOnInit(){var n=this;return(0,v.Z)(function*(){n.showSubmit=!0,n._service.postApi("getBranch","postEndPoint",{}).pipe((0,b.R)(n.destroy$)).subscribe({next:i=>{200==(i=n._service.enableCryptoForResponse()?n._service.decrypt(i):i).S_CODE&&(n.genderList=[{label:"Select Branches",value:null}],i.DATA=m.filter(i.DATA,{active:!0}),i.DATA.forEach((c,l)=>{n.genderList.push({label:c.bname,value:c._id})}))},error:i=>{}}),n._service.getUserInfo("userCader")})()}onBranchChange(n){var t=this;return(0,v.Z)(function*(){try{if(t.loading=!1,t.createTeam=[],![void 0,null,""].includes(t.createMaster.branch_id)){t.blocUI=!0;const i=t._service.postApi("getTeam","postEndPoint",{}),c=t._service.postApi("getEditTeam","postEndPoint",{branch:t.createMaster.branch_id});(0,U.D)([i,c]).subscribe({next:([l,a])=>{200==l.S_CODE?(t.blocUI=!1,l.DATA.cader.forEach((p,C)=>{let u={cdname:p.cdname,code:p.code,id:p.id,atleastOneSelect:!1,users:[]};p.users.length>0&&m.forEach(p.users,(g,E)=>{u.users.push({uname:g.uname,id:g.id,isChecked:g.isChecked||!1})}),t.createTeam.push(u)})):300==l.S_CODE&&(t.blocUI=!1),200==a.S_CODE?(t.blocUI=!1,m.forEach(t.createTeam,(p,C)=>{m.forEach(p.users,(u,g)=>{null!=a.DATA.cader&&m.forEach(a.DATA.cader,(E,I)=>{m.filter(E.users,(Z,oe)=>Z._id==u.id&&1==Z.isChecked).length>0&&(u.isChecked=!0)})}),t.showSubmit=!p.users.some((u,g)=>u.isChecked)})):300==a.S_CODE&&(t.showSubmit=!0,t.blocUI=!1)},error:l=>{}})}}catch{}})()}onUserChecked(n,t,i,c){m.forEach(t,(l,a)=>{"BM"==c.code&&(l.isChecked=!1)}),n.target.checked&&"BM"==c.code&&(i.isChecked=n.target.checked),this.showSubmit=!n.target.checked}saveProduct(){var n=this;let t=JSON.parse(JSON.stringify(this.createTeam)),i={branch:this.createMaster.branch_id,cader:[]};var l;m.forEach(t,(l,a)=>{let p={cader:l.id,users:l.users.filter((C,u)=>C.isChecked)};i.cader.push(p)}),i.cader=i.cader.filter((l,a)=>l.users.length>0),this.loading=!0,this._service.postApi("createTeam","postEndPoint",i).pipe((0,b.R)(this.destroy$)).subscribe({next:(l=(0,v.Z)(function*(a){200==(a=n._service.enableCryptoForResponse()?n._service.decrypt(a):a).S_CODE?(n.MessageService.add({severity:"success",summary:"Success",detail:`${a.S_MSG}`}),yield n.onBranchChange(null),n.loading=!1,n.loading=!1):300==a.S_CODE&&(n.MessageService.add({severity:"error",summary:"Error",detail:`${a.S_MSG}`}),n.loading=!1)}),function(p){return l.apply(this,arguments)}),error:l=>{this.loading=!1}})}atleastOneSelect(){return[void 0,null,""].includes(this.createMaster.branch_id)&&0==m.filter(this.createTeam,(n,t)=>0==n.atleastOne).length}}return(s=d).\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-team"]],features:[e._Bn([M.ez])],decls:14,vars:10,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"flex","justify-content-between","flex-wrap"],[1,"flex","align-items-center","justify-content-center","w-10rem","h-2rem","font-bold","border-round","m-2"],[1,"ng-invalid","ng-dirty",3,"options","ngModel","filter","ngModelChange","onChange"],["pButton","","pRipple","","label","Save","icon","pi pi-check","class","","styleClass","p-button-rounded ",3,"disabled","loading","click",4,"ngIf"],[1,"main_crt_mstrs"],["class","crt_mstrs",4,"ngFor","ngForOf"],["position","top-right",3,"breakpoints"],["pButton","","pRipple","","label","Save","icon","pi pi-check","styleClass","p-button-rounded ",1,"",3,"disabled","loading","click"],[1,"crt_mstrs"],[1,"crt_mstrs_pstn"],[1,"crt_mstrs_lst",2,"list-style-type","none","margin","0"],[4,"ngFor","ngForOf"],["type","checkbox","name","tst",3,"id","ngModel","ngModelChange","change"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._uU(5," Create Teams "),e.qZA(),e.TgZ(6,"div",4)(7,"p-dropdown",5),e.NdJ("ngModelChange",function(c){return t.createMaster.branch_id=c})("onChange",function(c){return t.onBranchChange(c)}),e.qZA()(),e.TgZ(8,"div",4),e.YNc(9,F,1,2,"button",6),e.qZA()(),e.TgZ(10,"div",2)(11,"div",7),e.YNc(12,P,5,2,"div",8),e.qZA()()()()(),e._UZ(13,"p-toast",9)),2&n&&(e.xp6(7),e.Q6J("options",t.genderList)("ngModel",t.createMaster.branch_id)("filter",!0),e.xp6(2),e.Q6J("ngIf",!e.DdM(6,N).includes(t.createMaster.branch_id)),e.xp6(3),e.Q6J("ngForOf",t.createTeam),e.xp6(1),e.Q6J("breakpoints",e.VKq(8,j,e.DdM(7,R))))},dependencies:[h.sg,h.O5,f.Wl,f.JJ,f.On,$.Hq,y.Lt,S.FN],styles:[".main_crt_mstrs[_ngcontent-%COMP%] {\n        margin-top: 10px;\n        display: flex;\n        flex-direction: column;\n        gap: 20px;\n    }\n\n    .crt_mstrs[_ngcontent-%COMP%] {\n        border-radius: 3px;\n        position: relative;\n        padding-top: 5px;\n        font-weight: bold;\n        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;\n    }\n\n    .crt_mstrs_pstn[_ngcontent-%COMP%] {\n        position: absolute;\n        top: -10px;\n        left: 10px;\n        background-color: #fff;\n        padding: 0 5px;\n        color: #033fa0;\n    }\n\n    .crt_mstrs_lst[_ngcontent-%COMP%] {\n        display: flex;\n        gap: 5px;\n        flex-wrap: wrap;\n        padding: 10px;\n    }"]}),d})(),G=(()=>{var s;class d{}return(s=d).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[x.Bz.forChild([{path:"",component:z}]),x.Bz]}),d})();var H=r(7327),L=r(6760),Q=r(1480),k=r(9663),A=r(5167),O=r(8062),K=r(4055),W=r(6218),X=r(3714),Y=r(9552),V=r(7902),w=r(6651),_=r(9246),q=r(6782),ee=r(2892),ne=r(3722);let te=(()=>{var s;class d{}return(s=d).\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.ez,f.u5,G,H.WN,L._8,Q.Gg,y.kW,k.zz,A.L$,O.XH,K.q4,W.A,X.j,Y.U$,V.JH,w.q,_.l,q.kK,O.XH,ne.O,ee.$,A.L$,S.EV]}),d})()}}]);