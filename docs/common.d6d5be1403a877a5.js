"use strict";(self.webpackChunksml=self.webpackChunksml||[]).push([[592],{7992:(w,p,r)=>{r.d(p,{w:()=>S});var _=r(5861),t=r(4769),l=r(5219),m=r(8645),h=r(9773),f=r(4850),a=r(6814),g=r(707),u=r(3702),v=r(4104),P=r(5195);function C(s,c){if(1&s&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.headerName," ")}}function y(s,c){if(1&s&&t._UZ(0,"p-sortIcon",14),2&s){const e=t.oxw().$implicit;t.Q6J("field",e.field)}}function E(s,c){if(1&s&&(t.TgZ(0,"th",12),t._uU(1),t.YNc(2,y,1,1,"p-sortIcon",13),t.qZA()),2&s){const e=c.$implicit;t.Q6J("pSortableColumn",e.field),t.xp6(1),t.hij(" ",e.header," "),t.xp6(1),t.Q6J("ngIf",e.showSort)}}function O(s,c){if(1&s&&(t.TgZ(0,"tr"),t.YNc(1,E,3,3,"th",11),t.qZA()),2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.cols)}}function T(s,c){if(1&s&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&s){const e=c.$implicit,i=c.index,o=t.oxw(),n=o.columns,d=o.$implicit;t.Q6J("ngStyle","active"==n[i].field?"Active"==d[e.field]?n[i].color[1]:n[i].color[0]:n[i].style),t.xp6(1),t.hij(" ",d[e.field]," ")}}function D(s,c){if(1&s&&(t.TgZ(0,"tr"),t.YNc(1,T,2,2,"td",15),t.qZA()),2&s){const e=c.columns;t.xp6(1),t.Q6J("ngForOf",e)}}const I=function(){return[10,25,50]},x=function(){return{"min-width":"45rem","min-height":"30rem"}};function b(s,c){if(1&s&&(t.TgZ(0,"div",null,5)(2,"p-table",6),t.YNc(3,C,2,1,"ng-template",7),t.YNc(4,O,2,1,"ng-template",8),t.YNc(5,D,2,1,"ng-template",9),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Q6J("value",e.products)("columns",e.cols)("paginator",!0)("rows",e.products.length)("showCurrentPageReport",!1)("rowsPerPageOptions",t.DdM(8,I))("tableStyle",t.DdM(9,x))("scrollable",!0)}}let S=(()=>{class s{constructor(e,i){this.messageService=e,this.confirmationService=i,this.masterApiKey="",this.headerName="Mange Headers",this.productDialog=!1,this.clonedProducts={},this.products=[],this.submitted=!1,this.blocUI=!1,this._service=(0,t.f3M)(f.r),this.destroy$=new m.x,this.isEnabled=new t.vpe}ngOnInit(){this.blocUI=!0,this.gridData(),setInterval(()=>this.blocUI=!1,4e3),this.statuses=[{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]}gridData(){var e=this;try{this._service.postApi(this.masterApiKey,"postEndPoint",null).pipe((0,h.R)(this.destroy$)).subscribe({next:i=>{200==i.S_CODE&&(this.products=[],i.DATA.forEach(function(){var o=(0,_.Z)(function*(n,d){n.active=1==n.active?"Active":"Inactive";let A={...e.onlyGenderProps,...n};e.products.push(A)});return function(n,d){return o.apply(this,arguments)}}()))},error:i=>{this.blocUI=!1}})}catch{}}openNew(){this.product={},this.submitted=!1,this.isEnabled.emit(!0),this.productDialog=!0}deleteSelectedProducts(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected products?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(e=>!this.selectedProducts?.includes(e)),this.selectedProducts=null,this.messageService.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})}})}editProduct(e){this.product={...e},this.productDialog=!0}deleteProduct(e){this.confirmationService.confirm({message:"Are you sure you want to delete "+e.name+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(i=>i.id!==e.id),this.product={},this.messageService.add({severity:"success",summary:"Successful",detail:"Product Deleted",life:3e3})}})}hideDialog(){this.productDialog=!1,this.submitted=!1}saveProduct(){this.submitted=!0,this.product.name?.trim()&&(this.product.id?(this.products[this.findIndexById(this.product.id)]=this.product,this.messageService.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):(this.product.id=this.createId(),this.product.image="product-placeholder.svg",this.products.push(this.product),this.messageService.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3})),this.products=[...this.products],this.productDialog=!1,this.product={})}findIndexById(e){let i=-1;for(let o=0;o<this.products.length;o++)if(this.products[o].id===e){i=o;break}return i}createId(){let e="";for(var o=0;o<5;o++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return e}getSeverity(e){}onRowEditInit(e){this.clonedProducts[e.id]={...e}}onRowEditSave(e){e.price&&e.price>0?(delete this.clonedProducts[e.id],this.messageService.add({severity:"success",summary:"Success",detail:"Product is updated"})):this.messageService.add({severity:"error",summary:"Error",detail:"Invalid Price"})}onRowEditCancel(e,i){this.products[i]=this.clonedProducts[e.id],delete this.clonedProducts[e.id]}customSort(e){}static#t=this.\u0275fac=function(i){return new(i||s)(t.Y36(l.ez),t.Y36(l.YP))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["crudgrid"]],inputs:{masterApiKey:"masterApiKey",headerName:"headerName",onlyGenderProps:"onlyGenderProps",cols:"cols"},outputs:{isEnabled:"isEnabled"},features:[t._Bn([l.ez,l.YP])],decls:6,vars:3,consts:[["pButton","","pRipple","","label","Create",1,"p-button-primary","m-1",3,"click"],[1,"grid"],[1,"col-12"],[4,"ngIf"],[3,"showBlockui","target"],["t",""],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries","styleClass","p-datatable-striped ","scrollHeight","400px",3,"value","columns","paginator","rows","showCurrentPageReport","rowsPerPageOptions","tableStyle","scrollable"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"flex","justify-content-center","p-1"],["class","text-left p-1",3,"pSortableColumn",4,"ngFor","ngForOf"],[1,"text-left","p-1",3,"pSortableColumn"],[3,"field",4,"ngIf"],[3,"field"],["class","m-1",3,"ngStyle",4,"ngFor","ngForOf"],[1,"m-1",3,"ngStyle"]],template:function(i,o){1&i&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.openNew()}),t.qZA(),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,b,6,10,"div",3),t.qZA()(),t._UZ(4,"blockui",4)(5,"p-toast")),2&i&&(t.xp6(3),t.Q6J("ngIf",o.products.length>0),t.xp6(1),t.Q6J("showBlockui",o.blocUI)("target","t"))},dependencies:[a.sg,a.O5,a.PC,g.Hq,l.jx,u.iA,u.lQ,u.fz,v.FN,P.l]})}return s})()}}]);